"use strict";exports.id=648,exports.ids=[648],exports.modules={26648:(Ya,Hr,w)=>{w.d(Hr,{getDefaultRoleAssumer:()=>Ur,getDefaultRoleAssumerWithWebIdentity:()=>Br});const Wr=async e=>{const t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Vr(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!qr(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},zr=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,jr=/(\d+\.){3}\d+/,Gr=/\.\./,Xa=/\./,Ja=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./,qr=e=>zr.test(e)&&!jr.test(e)&&!Gr.test(e),Vr=e=>{const[t,n,r,,,s]=e.split(":"),o=t==="arn"&&e.split(":").length>=6,i=Boolean(o&&n&&r&&s);if(o&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i},Kr=(e,t,n)=>{const r=async()=>{const s=n[e]??n[t];return typeof s=="function"?s():s};return e==="credentialScope"||t==="CredentialScope"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return s?.credentialScope??s?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return s?.accountId??s?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{const s=await r();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){const{protocol:o,hostname:i,port:a,path:c}=s;return`${o}//${i}${a?":"+a:""}${c}`}}return s}:r};class Ce extends Error{constructor(t,n=!0){let r,s=!0;typeof n=="boolean"?(r=void 0,s=n):n!=null&&typeof n=="object"&&(r=n.logger,s=n.tryNextLink??!0),super(t),this.name="ProviderError",this.tryNextLink=s,Object.setPrototypeOf(this,Ce.prototype),r?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${t}`)}static from(t,n=!0){return Object.assign(new this(t.message,n),t)}}class Oe extends Ce{constructor(t,n=!0){super(t,n),this.name="CredentialsProviderError",Object.setPrototypeOf(this,Oe.prototype)}}class rn extends Ce{constructor(t,n=!0){super(t,n),this.name="TokenProviderError",Object.setPrototypeOf(this,rn.prototype)}}const Yr=(...e)=>async()=>{if(e.length===0)throw new Ce("No providers in chain");let t;for(const n of e)try{return await n()}catch(r){if(t=r,r?.tryNextLink)continue;throw r}throw t},Xr=e=>()=>Promise.resolve(e),Jr=(e,t,n)=>{let r,s,o,i=!1;const a=async()=>{s||(s=e());try{r=await s,o=!0,i=!1}finally{s=void 0}return r};return t===void 0?async c=>((!o||c?.forceRefresh)&&(r=await a()),r):async c=>((!o||c?.forceRefresh)&&(r=await a()),i?r:n&&!n(r)?(i=!0,r):(t(r)&&await a(),r))};function sn(e){try{const t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch{return e}}const Qr=(e,t)=>async()=>{try{const n=e(process.env);if(n===void 0)throw new Error;return n}catch(n){throw new Oe(n.message||`Not found in ENV: ${sn(e.toString())}`,{logger:t})}};var Zr=w(70857),_e=w(16928);const Ve={},es=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",Ke=()=>{const{HOME:e,USERPROFILE:t,HOMEPATH:n,HOMEDRIVE:r=`C:${_e.sep}`}=process.env;if(e)return e;if(t)return t;if(n)return`${r}${n}`;const s=es();return Ve[s]||(Ve[s]=(0,Zr.homedir)()),Ve[s]},ts="AWS_PROFILE",ns="default",rs=e=>e.profile||process.env[ts]||ns;var Qa=w(76982);const Za=e=>{const n=createHash("sha1").update(e).digest("hex");return join(getHomeDir(),".aws","sso","cache",`${n}.json`)};var on=w(79896);const{readFile:ss}=on.promises,ec=async e=>{const t=getSSOTokenFilepath(e),n=await ss(t,"utf8");return JSON.parse(n)};var an;(function(e){e.HEADER="header",e.QUERY="query"})(an||(an={}));var cn;(function(e){e.HEADER="header",e.QUERY="query"})(cn||(cn={}));var dn;(function(e){e.HTTP="http",e.HTTPS="https"})(dn||(dn={}));var le;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(le||(le={}));const tc=e=>{const t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>le.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>le.MD5,checksumConstructor:()=>e.md5}),{_checksumAlgorithms:t,addChecksumAlgorithm(n){this._checksumAlgorithms.push(n)},checksumAlgorithms(){return this._checksumAlgorithms}}},nc=e=>{const t={};return e.checksumAlgorithms().forEach(n=>{t[n.algorithmId()]=n.checksumConstructor()}),t},rc=e=>({...getChecksumConfiguration(e)}),sc=e=>({...resolveChecksumRuntimeConfig(e)});var ln;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(ln||(ln={}));const Ye="__smithy_context";var Ie;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(Ie||(Ie={}));var un;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(un||(un={}));const os=e=>Object.entries(e).filter(([t])=>{const n=t.indexOf(ue);return n===-1?!1:Object.values(Ie).includes(t.substring(0,n))}).reduce((t,[n,r])=>{const s=n.indexOf(ue),o=n.substring(0,s)===Ie.PROFILE?n.substring(s+1):n;return t[o]=r,t},{...e.default&&{default:e.default}}),is="AWS_CONFIG_FILE",as=()=>process.env[is]||(0,_e.join)(Ke(),".aws","config"),cs="AWS_SHARED_CREDENTIALS_FILE",ds=()=>process.env[cs]||(0,_e.join)(Ke(),".aws","credentials"),ls=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,us=["__proto__","profile __proto__"],fn=e=>{const t={};let n,r;for(const s of e.split(/\r?\n/)){const o=s.split(/(^|\s)[;#]/)[0].trim();if(o[0]==="["&&o[o.length-1]==="]"){n=void 0,r=void 0;const a=o.substring(1,o.length-1),c=ls.exec(a);if(c){const[,u,,f]=c;Object.values(Ie).includes(u)&&(n=[u,f].join(ue))}else n=a;if(us.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(n){const a=o.indexOf("=");if(![0,-1].includes(a)){const[c,u]=[o.substring(0,a).trim(),o.substring(a+1).trim()];if(u==="")r=c;else{r&&s.trimStart()===s&&(r=void 0),t[n]=t[n]||{};const f=r?[r,c].join(ue):c;t[n][f]=u}}}}return t},{readFile:fs}=on.promises,Xe={},hn=(e,t)=>((!Xe[e]||t?.ignoreCache)&&(Xe[e]=fs(e,"utf8")),Xe[e]),mn=()=>({}),ue=".",hs=async(e={})=>{const{filepath:t=ds(),configFilepath:n=as()}=e,r=Ke(),s="~/";let o=t;t.startsWith(s)&&(o=(0,_e.join)(r,t.slice(2)));let i=n;n.startsWith(s)&&(i=(0,_e.join)(r,n.slice(2)));const a=await Promise.all([hn(i,{ignoreCache:e.ignoreCache}).then(fn).then(os).catch(mn),hn(o,{ignoreCache:e.ignoreCache}).then(fn).catch(mn)]);return{configFile:a[0],credentialsFile:a[1]}},oc=e=>Object.entries(e).filter(([t])=>t.startsWith(IniSectionType.SSO_SESSION+CONFIG_PREFIX_SEPARATOR)).reduce((t,[n,r])=>({...t,[n.substring(n.indexOf(CONFIG_PREFIX_SEPARATOR)+1)]:r}),{}),ms=()=>({}),ic=async(e={})=>slurpFile(e.configFilepath??getConfigFilepath()).then(parseIni).then(getSsoSessionData).catch(ms),ac=async e=>{const t=await loadSharedConfigFiles(e);return mergeConfigFiles(t.configFile,t.credentialsFile)},ys=(e,{preferredFile:t="config",...n}={})=>async()=>{const r=rs(n),{configFile:s,credentialsFile:o}=await hs(n),i=o[r]||{},a=s[r]||{},c=t==="config"?{...i,...a}:{...a,...i};try{const f=e(c,t==="config"?s:o);if(f===void 0)throw new Error;return f}catch(u){throw new Oe(u.message||`Not found in config files w/ profile [${r}]: ${sn(e.toString())}`,{logger:n.logger})}},gs=e=>typeof e=="function",ps=e=>gs(e)?async()=>await e():Xr(e),fe=({environmentVariableSelector:e,configFileSelector:t,default:n},r={})=>Jr(Yr(Qr(e),ys(t,r),ps(n))),yn="AWS_ENDPOINT_URL",gn="endpoint_url",Es=e=>({environmentVariableSelector:t=>{const n=e.split(" ").map(o=>o.toUpperCase()),r=t[[yn,...n].join("_")];if(r)return r;const s=t[yn];if(s)return s},configFileSelector:(t,n)=>{if(n&&t.services){const s=n[["services",t.services].join(ue)];if(s){const o=e.split(" ").map(a=>a.toLowerCase()),i=s[[o.join("_"),gn].join(ue)];if(i)return i}}const r=t[gn];if(r)return r},default:void 0}),Ss=async e=>fe(Es(e))();function ws(e){const t={};if(e=e.replace(/^\?/,""),e)for(const n of e.split("&")){let[r,s=null]=n.split("=");r=decodeURIComponent(r),s&&(s=decodeURIComponent(s)),r in t?Array.isArray(t[r])?t[r].push(s):t[r]=[t[r],s]:t[r]=s}return t}const Ne=e=>{if(typeof e=="string")return Ne(new URL(e));const{hostname:t,pathname:n,port:r,protocol:s,search:o}=e;let i;return o&&(i=ws(o)),{hostname:t,port:r?parseInt(r):void 0,protocol:s,path:n,query:i}},pn=e=>typeof e=="object"?"url"in e?Ne(e.url):e:Ne(e),Rs=async(e,t,n,r)=>{if(!n.endpoint){const i=await Ss(n.serviceId||"");i&&(n.endpoint=()=>Promise.resolve(pn(i)))}const s=await Ts(e,t,n);if(typeof n.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return n.endpointProvider(s,r)},Ts=async(e,t,n)=>{const r={},s=t?.getEndpointParameterInstructions?.()||{};for(const[o,i]of Object.entries(s))switch(i.type){case"staticContextParams":r[o]=i.value;break;case"contextParams":r[o]=e[i.name];break;case"clientContextParams":case"builtInParams":r[o]=await Kr(i.name,o,n)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(s).length===0&&Object.assign(r,n),String(n.serviceId).toLowerCase()==="s3"&&await Wr(r),r},En=e=>e[Ye]||(e[Ye]={}),he=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t},As=({config:e,instructions:t})=>(n,r)=>async s=>{const o=await Rs(s.input,{getEndpointParameterInstructions(){return t}},{...e},r);r.endpointV2=o,r.authSchemes=o.properties?.authSchemes;const i=r.authSchemes?.[0];if(i){r.signing_region=i.signingRegion,r.signing_service=i.signingName;const c=En(r)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return n({...s})},bs=(e,t)=>n=>async r=>{const{response:s}=await n(r);try{const o=await t(s,e);return{response:s,output:o}}catch(o){if(Object.defineProperty(o,"$response",{value:s}),!("$metadata"in o)){const i="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";o.message+=`
  `+i,typeof o.$responseBodyText<"u"&&o.$response&&(o.$response.body=o.$responseBodyText)}throw o}},Cs=(e,t)=>(n,r)=>async s=>{const o=r.endpointV2?.url&&e.urlParser?async()=>e.urlParser(r.endpointV2.url):e.endpoint;if(!o)throw new Error("No valid endpoint provider available.");const i=await t(s.input,{...e,endpoint:o});return n({...s,request:i})},_s={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Sn={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function wn(e,t,n){return{applyToStack:r=>{r.add(bs(e,n),_s),r.add(Cs(e,t),Sn)}}}const Is={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Sn.name},Rn=(e,t)=>({applyToStack:n=>{n.addRelativeTo(As({config:e,instructions:t}),Is)}}),xs=e=>{const t=e.tls??!0,{endpoint:n}=e,r=n!=null?async()=>pn(await he(n)()):void 0;return{...e,endpoint:r,tls:t,isCustomEndpoint:!!n,useDualstackEndpoint:he(e.useDualstackEndpoint??!1),useFipsEndpoint:he(e.useFipsEndpoint??!1)}};class Tn{trace(){}debug(){}info(){}warn(){}error(){}}const ae=(e,t)=>{const n=[];if(e&&n.push(e),t)for(const r of t)n.push(r);return n},X=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,Fe=()=>{let e=[],t=[],n=!1;const r=new Set,s=d=>d.sort((l,h)=>An[h.step]-An[l.step]||bn[h.priority||"normal"]-bn[l.priority||"normal"]),o=d=>{let l=!1;const h=E=>{const b=ae(E.name,E.aliases);if(b.includes(d)){l=!0;for(const m of b)r.delete(m);return!1}return!0};return e=e.filter(h),t=t.filter(h),l},i=d=>{let l=!1;const h=E=>{if(E.middleware===d){l=!0;for(const b of ae(E.name,E.aliases))r.delete(b);return!1}return!0};return e=e.filter(h),t=t.filter(h),l},a=d=>(e.forEach(l=>{d.add(l.middleware,{...l})}),t.forEach(l=>{d.addRelativeTo(l.middleware,{...l})}),d.identifyOnResolve?.(f.identifyOnResolve()),d),c=d=>{const l=[];return d.before.forEach(h=>{h.before.length===0&&h.after.length===0?l.push(h):l.push(...c(h))}),l.push(d),d.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?l.push(h):l.push(...c(h))}),l},u=(d=!1)=>{const l=[],h=[],E={};return e.forEach(m=>{const g={...m,before:[],after:[]};for(const y of ae(g.name,g.aliases))E[y]=g;l.push(g)}),t.forEach(m=>{const g={...m,before:[],after:[]};for(const y of ae(g.name,g.aliases))E[y]=g;h.push(g)}),h.forEach(m=>{if(m.toMiddleware){const g=E[m.toMiddleware];if(g===void 0){if(d)return;throw new Error(`${m.toMiddleware} is not found when adding ${X(m.name,m.aliases)} middleware ${m.relation} ${m.toMiddleware}`)}m.relation==="after"&&g.after.push(m),m.relation==="before"&&g.before.push(m)}}),s(l).map(c).reduce((m,g)=>(m.push(...g),m),[])},f={add:(d,l={})=>{const{name:h,override:E,aliases:b}=l,m={step:"initialize",priority:"normal",middleware:d,...l},g=ae(h,b);if(g.length>0){if(g.some(y=>r.has(y))){if(!E)throw new Error(`Duplicate middleware name '${X(h,b)}'`);for(const y of g){const S=e.findIndex(N=>N.name===y||N.aliases?.some(de=>de===y));if(S===-1)continue;const A=e[S];if(A.step!==m.step||m.priority!==A.priority)throw new Error(`"${X(A.name,A.aliases)}" middleware with ${A.priority} priority in ${A.step} step cannot be overridden by "${X(h,b)}" middleware with ${m.priority} priority in ${m.step} step.`);e.splice(S,1)}}for(const y of g)r.add(y)}e.push(m)},addRelativeTo:(d,l)=>{const{name:h,override:E,aliases:b}=l,m={middleware:d,...l},g=ae(h,b);if(g.length>0){if(g.some(y=>r.has(y))){if(!E)throw new Error(`Duplicate middleware name '${X(h,b)}'`);for(const y of g){const S=t.findIndex(N=>N.name===y||N.aliases?.some(de=>de===y));if(S===-1)continue;const A=t[S];if(A.toMiddleware!==m.toMiddleware||A.relation!==m.relation)throw new Error(`"${X(A.name,A.aliases)}" middleware ${A.relation} "${A.toMiddleware}" middleware cannot be overridden by "${X(h,b)}" middleware ${m.relation} "${m.toMiddleware}" middleware.`);t.splice(S,1)}}for(const y of g)r.add(y)}t.push(m)},clone:()=>a(Fe()),use:d=>{d.applyToStack(f)},remove:d=>typeof d=="string"?o(d):i(d),removeByTag:d=>{let l=!1;const h=E=>{const{tags:b,name:m,aliases:g}=E;if(b&&b.includes(d)){const y=ae(m,g);for(const S of y)r.delete(S);return l=!0,!1}return!0};return e=e.filter(h),t=t.filter(h),l},concat:d=>{const l=a(Fe());return l.use(d),l.identifyOnResolve(n||l.identifyOnResolve()||(d.identifyOnResolve?.()??!1)),l},applyToStack:a,identify:()=>u(!0).map(d=>{const l=d.step??d.relation+" "+d.toMiddleware;return X(d.name,d.aliases)+" - "+l}),identifyOnResolve(d){return typeof d=="boolean"&&(n=d),n},resolve:(d,l)=>{for(const h of u().map(E=>E.middleware).reverse())d=h(d,l);return n&&console.log(f.identify()),d}};return f},An={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},bn={high:3,normal:2,low:1};class Ps{constructor(t){this.middlewareStack=Fe(),this.config=t}send(t,n,r){const s=typeof n!="function"?n:void 0,o=typeof n=="function"?n:r,i=t.resolveMiddleware(this.middlewareStack,this.config,s);if(o)i(t).then(a=>o(null,a.output),a=>o(a)).catch(()=>{});else return i(t).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}const Cn=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var me=w(20181);const vs=(e,t=0,n=e.byteLength-t)=>{if(!Cn(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return me.Buffer.from(e,t,n)},Ds=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?me.Buffer.from(e,t):me.Buffer.from(e)},$s=/^[A-Za-z0-9+/]*={0,2}$/,Ms=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!$s.exec(e))throw new TypeError("Invalid base64 string.");const t=Ds(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},ks=(e,t=0,n=e.byteLength-t)=>{if(!Cn(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return me.Buffer.from(e,t,n)},Os=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?me.Buffer.from(e,t):me.Buffer.from(e)},_n=e=>{const t=Os(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},cc=e=>typeof e=="string"?fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),Ns=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return ks(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},Fs=e=>{let t;if(typeof e=="string"?t=_n(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return vs(t.buffer,t.byteOffset,t.byteLength).toString("base64")};function dc(e,t="utf-8"){return t==="base64"?toBase64(e):toUtf8(e)}function lc(e,t){return t==="base64"?Uint8ArrayBlobAdapter.mutate(fromBase64(e)):Uint8ArrayBlobAdapter.mutate(fromUtf8(e))}class In extends null{static fromString(t,n="utf-8"){switch(typeof t){case"string":return transformFromString(t,n);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,In.prototype),t}transformToString(t="utf-8"){return transformToString(this,t)}}var Le=w(2203);const uc=(e,t)=>{const{base64Encoder:n,bodyLengthChecker:r,checksumAlgorithmFn:s,checksumLocationName:o,streamHasher:i}=t,a=n!==void 0&&s!==void 0&&o!==void 0&&i!==void 0,c=a?i(s,e):void 0,u=new Readable({read:()=>{}});return e.on("data",f=>{const d=r(f)||0;u.push(`${d.toString(16)}\r
`),u.push(f),u.push(`\r
`)}),e.on("end",async()=>{if(u.push(`0\r
`),a){const f=n(await c);u.push(`${o}:${f}\r
`),u.push(`\r
`)}u.push(null)}),u},Ls=e=>{let t=e.httpHandler;return{setHttpHandler(n){t=n},httpHandler(){return t},updateHttpClientConfig(n,r){t.updateHttpClientConfig(n,r)},httpHandlerConfigs(){return t.httpHandlerConfigs()}}},Us=e=>({httpHandler:e.httpHandler()});class fc{constructor({name:t,kind:n=FieldPosition.HEADER,values:r=[]}){this.name=t,this.kind=n,this.values=r}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter(n=>n!==t)}toString(){return this.values.map(t=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}}class ce{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){const n=new ce({...t,headers:{...t.headers}});return n.query&&(n.query=Bs(n.query)),n}static isInstance(t){if(!t)return!1;const n=t;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){return ce.clone(this)}}function Bs(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return{...t,[n]:Array.isArray(r)?[...r]:r}},{})}class Je{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;const n=t;return typeof n.statusCode=="number"&&typeof n.headers=="object"}}const Qe=e=>encodeURIComponent(e).replace(/[!'()*]/g,Hs),Hs=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;function Ws(e){const t=[];for(let n of Object.keys(e).sort()){const r=e[n];if(n=Qe(n),Array.isArray(r))for(let s=0,o=r.length;s<o;s++)t.push(`${n}=${Qe(r[s])}`);else{let s=n;(r||typeof r=="string")&&(s+=`=${Qe(r)}`),t.push(s)}}return t.join("&")}var Ze=w(58611),et=w(65692);const zs=["ECONNRESET","EPIPE","ETIMEDOUT"],js=e=>{const t={};for(const n of Object.keys(e)){const r=e[n];t[n]=Array.isArray(r)?r.join(","):r}return t},Gs=(e,t,n=0)=>{if(!n)return;const r=setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${n} ms`),{name:"TimeoutError"}))},n);e.on("socket",s=>{s.connecting?s.on("connect",()=>{clearTimeout(r)}):clearTimeout(r)})},qs=(e,{keepAlive:t,keepAliveMsecs:n})=>{t===!0&&e.on("socket",r=>{r.setKeepAlive(t,n||0)})},Vs=(e,t,n=0)=>{e.setTimeout(n,()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${n} ms`),{name:"TimeoutError"}))})},xn=1e3;async function Ks(e,t,n=xn){const r=t.headers??{},s=r.Expect||r.expect;let o=-1,i=!1;s==="100-continue"&&await Promise.race([new Promise(a=>{o=Number(setTimeout(a,Math.max(xn,n)))}),new Promise(a=>{e.on("continue",()=>{clearTimeout(o),a()}),e.on("error",()=>{i=!0,clearTimeout(o),a()})})]),i||Ys(e,t.body)}function Ys(e,t){if(t instanceof Le.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}const n=t;if(typeof n=="object"&&n.buffer&&typeof n.byteOffset=="number"&&typeof n.byteLength=="number"){e.end(Buffer.from(n.buffer,n.byteOffset,n.byteLength));return}e.end(Buffer.from(t));return}e.end()}const hc=0;class Ue{static create(t){return typeof t?.handle=="function"?t:new Ue(t)}static checkSocketUsage(t,n,r=console){const{sockets:s,requests:o,maxSockets:i}=t;if(typeof i!="number"||i===1/0)return n;const a=15e3;if(Date.now()-a<n)return n;if(s&&o)for(const c in s){const u=s[c]?.length??0,f=o[c]?.length??0;if(u>=i&&f>=2*i)return r?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${u} and ${f} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return n}constructor(t){this.socketWarningTimestamp=0,this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((n,r)=>{typeof t=="function"?t().then(s=>{n(this.resolveDefaultConfig(s))}).catch(r):n(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){const{requestTimeout:n,connectionTimeout:r,socketTimeout:s,httpAgent:o,httpsAgent:i}=t||{},a=!0,c=50;return{connectionTimeout:r,requestTimeout:n??s,httpAgent:(()=>o instanceof Ze.Agent||typeof o?.destroy=="function"?o:new Ze.Agent({keepAlive:a,maxSockets:c,...o}))(),httpsAgent:(()=>i instanceof et.Agent||typeof i?.destroy=="function"?i:new et.Agent({keepAlive:a,maxSockets:c,...i}))(),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:n}={}){this.config||(this.config=await this.configProvider);let r;return new Promise((s,o)=>{let i;const a=async y=>{await i,clearTimeout(r),s(y)},c=async y=>{await i,clearTimeout(r),o(y)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(n?.aborted){const y=new Error("Request aborted");y.name="AbortError",c(y);return}const u=t.protocol==="https:",f=u?this.config.httpsAgent:this.config.httpAgent;r=setTimeout(()=>{this.socketWarningTimestamp=Ue.checkSocketUsage(f,this.socketWarningTimestamp,this.config.logger)},this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2e3)+(this.config.connectionTimeout??1e3));const d=Ws(t.query||{});let l;if(t.username!=null||t.password!=null){const y=t.username??"",S=t.password??"";l=`${y}:${S}`}let h=t.path;d&&(h+=`?${d}`),t.fragment&&(h+=`#${t.fragment}`);const E={headers:t.headers,host:t.hostname,method:t.method,path:h,port:t.port,agent:f,auth:l},m=(u?et.request:Ze.request)(E,y=>{const S=new Je({statusCode:y.statusCode||-1,reason:y.statusMessage,headers:js(y.headers),body:y});a({response:S})});if(m.on("error",y=>{zs.includes(y.code)?c(Object.assign(y,{name:"TimeoutError"})):c(y)}),Gs(m,c,this.config.connectionTimeout),Vs(m,c,this.config.requestTimeout),n){const y=()=>{m.destroy();const S=new Error("Request aborted");S.name="AbortError",c(S)};if(typeof n.addEventListener=="function"){const S=n;S.addEventListener("abort",y,{once:!0}),m.once("close",()=>S.removeEventListener("abort",y))}else n.onabort=y}const g=E.agent;typeof g=="object"&&"keepAlive"in g&&qs(m,{keepAlive:g.keepAlive,keepAliveMsecs:g.keepAliveMsecs}),i=Ks(m,t,this.config.requestTimeout).catch(y=>(clearTimeout(r),o(y)))})}updateHttpClientConfig(t,n){this.config=void 0,this.configProvider=this.configProvider.then(r=>({...r,[t]:n}))}httpHandlerConfigs(){return this.config??{}}}var mc=w(85675);class yc{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(n=>n!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(const n of this.sessions)n===t&&(n.destroyed||n.destroy())}}class gc{constructor(t){if(this.sessionCache=new Map,this.config=t,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}lease(t,n){const r=this.getUrlString(t),s=this.sessionCache.get(r);if(s){const c=s.poll();if(c&&!this.config.disableConcurrency)return c}const o=http2.connect(r);this.config.maxConcurrency&&o.settings({maxConcurrentStreams:this.config.maxConcurrency},c=>{if(c)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+t.destination.toString())}),o.unref();const i=()=>{o.destroy(),this.deleteSession(r,o)};o.on("goaway",i),o.on("error",i),o.on("frameError",i),o.on("close",()=>this.deleteSession(r,o)),n.requestTimeout&&o.setTimeout(n.requestTimeout,i);const a=this.sessionCache.get(r)||new NodeHttp2ConnectionPool;return a.offerLast(o),this.sessionCache.set(r,a),o}deleteSession(t,n){const r=this.sessionCache.get(t);!r||!r.contains(n)||(r.remove(n),this.sessionCache.set(t,r))}release(t,n){const r=this.getUrlString(t);this.sessionCache.get(r)?.offerLast(n)}destroy(){for(const[t,n]of this.sessionCache){for(const r of n)r.destroyed||r.destroy(),n.remove(r);this.sessionCache.delete(t)}}setMaxConcurrentStreams(t){if(this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=t}setDisableConcurrentStreams(t){this.config.disableConcurrency=t}getUrlString(t){return t.destination.toString()}}class Pn{static create(t){return typeof t?.handle=="function"?t:new Pn(t)}constructor(t){this.metadata={handlerProtocol:"h2"},this.connectionManager=new NodeHttp2ConnectionManager({}),this.configProvider=new Promise((n,r)=>{typeof t=="function"?t().then(s=>{n(s||{})}).catch(r):n(t||{})})}destroy(){this.connectionManager.destroy()}async handle(t,{abortSignal:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));const{requestTimeout:r,disableConcurrentStreams:s}=this.config;return new Promise((o,i)=>{let a=!1,c;const u=async I=>{await c,o(I)},f=async I=>{await c,i(I)};if(n?.aborted){a=!0;const I=new Error("Request aborted");I.name="AbortError",f(I);return}const{hostname:d,method:l,port:h,protocol:E,query:b}=t;let m="";if(t.username!=null||t.password!=null){const I=t.username??"",z=t.password??"";m=`${I}:${z}@`}const g=`${E}//${m}${d}${h?`:${h}`:""}`,y={destination:new URL(g)},S=this.connectionManager.lease(y,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:s||!1}),A=I=>{s&&this.destroySession(S),a=!0,f(I)},N=buildQueryString(b||{});let de=t.path;N&&(de+=`?${N}`),t.fragment&&(de+=`#${t.fragment}`);const H=S.request({...t.headers,[constants.HTTP2_HEADER_PATH]:de,[constants.HTTP2_HEADER_METHOD]:l});if(S.ref(),H.on("response",I=>{const z=new HttpResponse({statusCode:I[":status"]||-1,headers:getTransformedHeaders(I),body:H});a=!0,u({response:z}),s&&(S.close(),this.connectionManager.deleteSession(g,S))}),r&&H.setTimeout(r,()=>{H.close();const I=new Error(`Stream timed out because of no activity for ${r} ms`);I.name="TimeoutError",A(I)}),n){const I=()=>{H.close();const z=new Error("Request aborted");z.name="AbortError",A(z)};if(typeof n.addEventListener=="function"){const z=n;z.addEventListener("abort",I,{once:!0}),H.once("close",()=>z.removeEventListener("abort",I))}else n.onabort=I}H.on("frameError",(I,z,Ka)=>{A(new Error(`Frame type id ${I} in stream id ${Ka} has failed with code ${z}.`))}),H.on("error",A),H.on("aborted",()=>{A(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${H.rstCode}.`))}),H.on("close",()=>{S.unref(),s&&S.destroy(),a||A(new Error("Unexpected error: http2 request did not get a response"))}),c=writeRequestBody(H,t,r)})}updateHttpClientConfig(t,n){this.config=void 0,this.configProvider=this.configProvider.then(r=>({...r,[t]:n}))}httpHandlerConfigs(){return this.config??{}}destroySession(t){t.destroyed||t.destroy()}}class Xs extends Le.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,n,r){this.bufferedBytes.push(t),r()}}const Js=e=>Qs(e)?Zs(e):new Promise((t,n)=>{const r=new Xs;e.pipe(r),e.on("error",s=>{r.end(),n(s)}),r.on("error",n),r.on("finish",function(){const s=new Uint8Array(Buffer.concat(this.bufferedBytes));t(s)})}),Qs=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;async function Zs(e){const t=[],n=e.getReader();let r=!1,s=0;for(;!r;){const{done:a,value:c}=await n.read();c&&(t.push(c),s+=c.length),r=a}const o=new Uint8Array(s);let i=0;for(const a of t)o.set(a,i),i+=a.length;return o}const pc=(e,t=0,n=e.byteLength-t)=>{if(!isArrayBuffer(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Buffer.from(e,t,n)},Ec=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Buffer.from(e,t):Buffer.from(e)};var Sc=w(39023);const tt={supported:void 0};class vn{static create(t){return typeof t?.handle=="function"?t:new vn(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(n=>n||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),tt.supported===void 0&&(tt.supported=Boolean(typeof Request<"u"&&"keepalive"in new Request("https://[::1]")))}destroy(){}async handle(t,{abortSignal:n}={}){this.config||(this.config=await this.configProvider);const r=this.config.requestTimeout,s=this.config.keepAlive===!0,o=this.config.credentials;if(n?.aborted){const g=new Error("Request aborted");return g.name="AbortError",Promise.reject(g)}let i=t.path;const a=buildQueryString(t.query||{});a&&(i+=`?${a}`),t.fragment&&(i+=`#${t.fragment}`);let c="";if(t.username!=null||t.password!=null){const g=t.username??"",y=t.password??"";c=`${g}:${y}@`}const{port:u,method:f}=t,d=`${t.protocol}//${c}${t.hostname}${u?`:${u}`:""}${i}`,l=f==="GET"||f==="HEAD"?void 0:t.body,h={body:l,headers:new Headers(t.headers),method:f,credentials:o};l&&(h.duplex="half"),typeof AbortController<"u"&&(h.signal=n),tt.supported&&(h.keepalive=s);let E=()=>{};const b=new Request(d,h),m=[fetch(b).then(g=>{const y=g.headers,S={};for(const N of y.entries())S[N[0]]=N[1];return g.body!=null?{response:new HttpResponse({headers:S,reason:g.statusText,statusCode:g.status,body:g.body})}:g.blob().then(N=>({response:new HttpResponse({headers:S,reason:g.statusText,statusCode:g.status,body:N})}))}),requestTimeout(r)];return n&&m.push(new Promise((g,y)=>{const S=()=>{const A=new Error("Request aborted");A.name="AbortError",y(A)};if(typeof n.addEventListener=="function"){const A=n;A.addEventListener("abort",S,{once:!0}),E=()=>A.removeEventListener("abort",S)}else n.onabort=S})),Promise.race(m).finally(E)}updateHttpClientConfig(t,n){this.config=void 0,this.configProvider=this.configProvider.then(r=>(r[t]=n,r))}httpHandlerConfigs(){return this.config??{}}}const wc=e=>typeof Blob=="function"&&e instanceof Blob?eo(e):to(e);async function eo(e){const t=await no(e),n=fromBase64(t);return new Uint8Array(n)}async function to(e){const t=[],n=e.getReader();let r=!1,s=0;for(;!r;){const{done:a,value:c}=await n.read();c&&(t.push(c),s+=c.length),r=a}const o=new Uint8Array(s);let i=0;for(const a of t)o.set(a,i),i+=a.length;return o}function no(e){return new Promise((t,n)=>{const r=new FileReader;r.onloadend=()=>{if(r.readyState!==2)return n(new Error("Reader aborted too early"));const s=r.result??"",o=s.indexOf(","),i=o>-1?o+1:s.length;t(s.substring(i))},r.onabort=()=>n(new Error("Read aborted")),r.onerror=()=>n(r.error),r.readAsDataURL(e)})}const Dn={},nt={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Dn[e]=t,nt[t]=e}function Rc(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const r=e.slice(n,n+2).toLowerCase();if(r in nt)t[n/2]=nt[r];else throw new Error(`Cannot decode unrecognized sequence ${r} as hexadecimal`)}return t}function Tc(e){let t="";for(let n=0;n<e.byteLength;n++)t+=Dn[e[n]];return t}const $n="The stream has already been transformed.",Ac=e=>{if(!Mn(e)&&!isReadableStream(e)){const s=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${s}`)}let t=!1;const n=async()=>{if(t)throw new Error($n);return t=!0,await streamCollector(e)},r=s=>{if(typeof s.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return s.stream()};return Object.assign(e,{transformToByteArray:n,transformToString:async s=>{const o=await n();if(s==="base64")return toBase64(o);if(s==="hex")return toHex(o);if(s===void 0||s==="utf8"||s==="utf-8")return toUtf8(o);if(typeof TextDecoder=="function")return new TextDecoder(s).decode(o);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error($n);if(t=!0,Mn(e))return r(e);if(isReadableStream(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},Mn=e=>typeof Blob=="function"&&e instanceof Blob,kn="The stream has already been transformed.",bc=e=>{if(!(e instanceof Readable))try{return sdkStreamMixinReadableStream(e)}catch{const s=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${s}`)}let t=!1;const n=async()=>{if(t)throw new Error(kn);return t=!0,await streamCollector(e)};return Object.assign(e,{transformToByteArray:n,transformToString:async r=>{const s=await n();return r===void 0||Buffer.isEncoding(r)?fromArrayBuffer(s.buffer,s.byteOffset,s.byteLength).toString(r):new TextDecoder(r).decode(s)},transformToWebStream:()=>{if(t)throw new Error(kn);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please make sure you are using Node.js >= 17.0.0, or polyfill is available.");return t=!0,Readable.toWeb(e)}})};async function Cc(e){if(isReadableStream(e))return splitWebStream(e);const t=new PassThrough,n=new PassThrough;return e.pipe(t),e.pipe(n),[t,n]}const _c=(e,t)=>isReadableStream(e)?headWebStream(e,t):new Promise((n,r)=>{const s=new ro;s.limit=t,e.pipe(s),e.on("error",o=>{s.end(),r(o)}),s.on("error",r),s.on("finish",function(){const o=new Uint8Array(Buffer.concat(this.buffers));n(o)})});class ro extends Le.Writable{constructor(){super(...arguments),this.buffers=[],this.limit=1/0,this.bytesBuffered=0}_write(t,n,r){if(this.buffers.push(t),this.bytesBuffered+=t.byteLength??0,this.bytesBuffered>=this.limit){const s=this.bytesBuffered-this.limit,o=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=o.subarray(0,o.byteLength-s),this.emit("finish")}r()}}const Ic=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return Uint8ArrayBlobAdapter.mutate(e);if(!e)return Uint8ArrayBlobAdapter.mutate(new Uint8Array);const n=t.streamCollector(e);return Uint8ArrayBlobAdapter.mutate(await n)};class rt{constructor(){this.middlewareStack=Fe()}static classBuilder(){return new so}resolveMiddlewareWithContext(t,n,r,{middlewareFn:s,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:u,additionalContext:f,CommandCtor:d}){for(const m of s.bind(this)(d,t,n,r))this.middlewareStack.use(m);const l=t.concat(this.middlewareStack),{logger:h}=n,E={logger:h,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[Ye]:{commandInstance:this,...u},...f},{requestHandler:b}=n;return l.resolve(m=>b.handle(m.request,r||{}),E)}}class so{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=t=>t,this._outputFilterSensitiveLog=t=>t,this._serializer=null,this._deserializer=null}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,n,r={}){return this._smithyContext={service:t,operation:n,...r},this}c(t={}){return this._additionalContext=t,this}n(t,n){return this._clientName=t,this._commandName=n,this}f(t=r=>r,n=r=>r){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=n,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}build(){const t=this;let n;return n=class extends rt{static getEndpointParameterInstructions(){return t._ep}constructor(...[r]){super(),this.serialize=t._serializer,this.deserialize=t._deserializer,this.input=r??{},t._init(this)}resolveMiddleware(r,s,o){return this.resolveMiddlewareWithContext(r,s,o,{CommandCtor:n,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog,outputFilterSensitiveLog:t._outputFilterSensitiveLog,smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}}const On="***SensitiveInformation***",xc=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},Pc=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&We.warn(He(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){const t=e.toLowerCase();if((t==="false"||t==="true")&&We.warn(He(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},Be=e=>{if(e!=null){if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&We.warn(He(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},oo=Math.ceil(2**127*(2-2**-23)),st=e=>{const t=Be(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>oo)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},ot=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},vc=null,Nn=e=>it(e,32),Fn=e=>it(e,16),Ln=e=>it(e,8),it=(e,t)=>{const n=ot(e);if(n!==void 0&&io(n,t)!==n)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return n},io=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},ao=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},co=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;const t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},x=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return We.warn(He(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},Dc=e=>{if(e==null)return;const t=co(e),n=Object.entries(t).filter(([,r])=>r!=null).map(([r])=>r);if(n.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(n.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${n} were not null.`);return t},$c=e=>Be(typeof e=="string"?ye(e):e),Mc=null,lo=e=>st(typeof e=="string"?ye(e):e),uo=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,ye=e=>{const t=e.match(uo);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},kc=e=>typeof e=="string"?Un(e):Be(e),Oc=null,Nc=null,Fc=e=>typeof e=="string"?Un(e):st(e),Un=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},Lc=e=>ot(typeof e=="string"?ye(e):e),Uc=null,Bn=e=>Nn(typeof e=="string"?ye(e):e),fo=e=>Fn(typeof e=="string"?ye(e):e),ho=e=>Ln(typeof e=="string"?ye(e):e),He=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),We={warn:console.warn},mo=null,at=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Bc(e){const t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),s=e.getUTCDate(),o=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,u=o<10?`0${o}`:`${o}`,f=i<10?`0${i}`:`${i}`,d=a<10?`0${a}`:`${a}`;return`${mo[r]}, ${c} ${at[n]} ${t} ${u}:${f}:${d} GMT`}const yo=null,Hc=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=yo.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[n,r,s,o,i,a,c,u]=t,f=strictParseShort(ge(r)),d=j(s,"month",1,12),l=j(o,"day",1,31);return xe(f,d,l,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u})},go=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),po=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=go.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[n,r,s,o,i,a,c,u,f]=t,d=fo(ge(r)),l=j(s,"month",1,12),h=j(o,"day",1,31),E=xe(d,l,h,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u});return f.toUpperCase()!="Z"&&E.setTime(E.getTime()-xo(f)),E},Eo=null,So=null,wo=null,Wc=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=Eo.exec(e);if(t){const[n,r,s,o,i,a,c,u]=t;return xe(strictParseShort(ge(o)),ct(s),j(r,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u})}if(t=So.exec(e),t){const[n,r,s,o,i,a,c,u]=t;return Ao(xe(Ro(o),ct(s),j(r,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u}))}if(t=wo.exec(e),t){const[n,r,s,o,i,a,c,u]=t;return xe(strictParseShort(ge(u)),ct(r),j(s.trimLeft(),"day",1,31),{hours:o,minutes:i,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},zc=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=strictParseDouble(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},xe=(e,t,n,r)=>{const s=t-1;return Co(e,s,n),new Date(Date.UTC(e,s,n,j(r.hours,"hour",0,23),j(r.minutes,"minute",0,59),j(r.seconds,"seconds",0,60),Io(r.fractionalMilliseconds)))},Ro=e=>{const t=new Date().getUTCFullYear(),n=Math.floor(t/100)*100+strictParseShort(ge(e));return n<t?n+100:n},To=null,Ao=e=>e.getTime()-new Date().getTime()>To?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,ct=e=>{const t=at.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},bo=[31,28,31,30,31,30,31,31,30,31,30,31],Co=(e,t,n)=>{let r=bo[t];if(t===1&&_o(e)&&(r=29),n>r)throw new TypeError(`Invalid day for ${at[t]} in ${e}: ${n}`)},_o=e=>e%4===0&&(e%100!==0||e%400===0),j=(e,t,n,r)=>{const s=ho(ge(e));if(s<n||s>r)throw new TypeError(`${t} must be between ${n} and ${r}, inclusive`);return s},Io=e=>e==null?0:lo("0."+e)*1e3,xo=e=>{const t=e[0];let n=1;if(t=="+")n=1;else if(t=="-")n=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);const r=Number(e.substring(1,3)),s=Number(e.substring(4,6));return n*(r*60+s)*60*1e3},ge=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};class dt extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,dt.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}}const q=(e,t={})=>{Object.entries(t).filter(([,r])=>r!==void 0).forEach(([r,s])=>{(e[r]==null||e[r]==="")&&(e[r]=s)});const n=e.message||e.Message||"UnknownError";return e.message=n,delete e.Message,e},Po=({output:e,parsedBody:t,exceptionCtor:n,errorCode:r})=>{const s=Do(e),o=s.httpStatusCode?s.httpStatusCode+"":void 0,i=new n({name:t?.code||t?.Code||r||o||"UnknownError",$fault:"client",$metadata:s});throw q(i,t)},vo=e=>({output:t,parsedBody:n,errorCode:r})=>{Po({output:t,parsedBody:n,exceptionCtor:e,errorCode:r})},Do=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),$o=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};let Hn=!1;const Mo=e=>{e&&!Hn&&parseInt(e.substring(1,e.indexOf(".")))<16&&(Hn=!0)},ko=e=>{const t=[];for(const n in le){const r=le[n];e[r]!==void 0&&t.push({algorithmId:()=>r,checksumConstructor:()=>e[r]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(n){this._checksumAlgorithms.push(n)},checksumAlgorithms(){return this._checksumAlgorithms}}},Oo=e=>{const t={};return e.checksumAlgorithms().forEach(n=>{t[n.algorithmId()]=n.checksumConstructor()}),t},No=e=>{let t=e.retryStrategy;return{setRetryStrategy(n){t=n},retryStrategy(){return t}}},Fo=e=>{const t={};return t.retryStrategy=e.retryStrategy(),t},Lo=e=>({...ko(e),...No(e)}),jc=null,Uo=e=>({...Oo(e),...Fo(e)});function Wn(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}const lt=function(){const e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),n=new t;return Object.setPrototypeOf(n,e.prototype),n};lt.prototype=Object.create(String.prototype,{constructor:{value:lt,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(lt,String);class ze extends null{deserializeJSON(){return JSON.parse(super.toString())}toJSON(){return super.toString()}static fromObject(t){return t instanceof ze?t:t instanceof String||typeof t=="string"?new ze(t):new ze(JSON.stringify(t))}}const Bo=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),zn={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class W extends dt{constructor(t){super(t),Object.setPrototypeOf(this,W.prototype)}}class ut extends W{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,ut.prototype)}}class ft extends W{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,ft.prototype)}}class ht extends W{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,ht.prototype)}}class mt extends W{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,mt.prototype)}}class yt extends W{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,yt.prototype)}}class gt extends W{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,gt.prototype)}}class pt extends W{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,pt.prototype)}}class Et extends W{constructor(t){super({name:"InvalidAuthorizationMessageException",$fault:"client",...t}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,Et.prototype)}}const Pe=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:On}}),Ho=e=>({...e,...e.Credentials&&{Credentials:Pe(e.Credentials)}}),Gc=e=>({...e,...e.SAMLAssertion&&{SAMLAssertion:SENSITIVE_STRING}}),qc=e=>({...e,...e.Credentials&&{Credentials:Pe(e.Credentials)}}),Wo=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:On}}),zo=e=>({...e,...e.Credentials&&{Credentials:Pe(e.Credentials)}}),Vc=e=>({...e,...e.Credentials&&{Credentials:Pe(e.Credentials)}}),Kc=e=>({...e,...e.Credentials&&{Credentials:Pe(e.Credentials)}});var jo=w(83436),Go=w(12763),qo=w(53127);const St=(e,t)=>(0,qo.w)(e,t).then(n=>{if(n.length){const r=new Go.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,u)=>u.trim()===""&&u.includes(`
`)?"":void 0});r.addEntity("#xD","\r"),r.addEntity("#10",`
`);let s;try{s=r.parse(n,!0)}catch(c){throw c&&typeof c=="object"&&Object.defineProperty(c,"$responseBodyText",{value:n}),c}const o="#text",i=Object.keys(s)[0],a=s[i];return a[o]&&(a[i]=a[o],delete a[o]),(0,jo.rm)(a)}return{}}),Vo=async(e,t)=>{const n=await St(e,t);return n.Error&&(n.Error.message=n.Error.message??n.Error.Message),n},Yc=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"},Ko=async(e,t)=>{const n=Z;let r;return r=re({...ii(e,t),[te]:Fi,[ne]:ee}),Q(t,n,"/",void 0,r)},Xc=async(e,t)=>{const n=Z;let r;return r=re({...ai(e,t),[te]:Li,[ne]:ee}),Q(t,n,"/",void 0,r)},Yo=async(e,t)=>{const n=Z;let r;return r=re({...ci(e,t),[te]:Ui,[ne]:ee}),Q(t,n,"/",void 0,r)},Jc=async(e,t)=>{const n=Z;let r;return r=re({...di(e,t),[te]:Bi,[ne]:ee}),Q(t,n,"/",void 0,r)},Qc=async(e,t)=>{const n=Z;let r;return r=re({...li(e,t),[te]:Hi,[ne]:ee}),Q(t,n,"/",void 0,r)},Zc=async(e,t)=>{const n=Z;let r;return r=re({...ui(e,t),[te]:Wi,[ne]:ee}),Q(t,n,"/",void 0,r)},ed=async(e,t)=>{const n=Z;let r;return r=re({...fi(e,t),[te]:zi,[ne]:ee}),Q(t,n,"/",void 0,r)},td=async(e,t)=>{const n=Z;let r;return r=re({...hi(e,t),[te]:ji,[ne]:ee}),Q(t,n,"/",void 0,r)},Xo=async(e,t)=>{if(e.statusCode>=300)return J(e,t);const n=await St(e.body,t);let r={};return r=Si(n.AssumeRoleResult,t),{$metadata:D(e),...r}},nd=async(e,t)=>{if(e.statusCode>=300)return J(e,t);const n=await parseBody(e.body,t);let r={};return r=wi(n.AssumeRoleWithSAMLResult,t),{$metadata:D(e),...r}},Jo=async(e,t)=>{if(e.statusCode>=300)return J(e,t);const n=await St(e.body,t);let r={};return r=Ri(n.AssumeRoleWithWebIdentityResult,t),{$metadata:D(e),...r}},rd=async(e,t)=>{if(e.statusCode>=300)return J(e,t);const n=await parseBody(e.body,t);let r={};return r=Ti(n.DecodeAuthorizationMessageResult,t),{$metadata:D(e),...r}},sd=async(e,t)=>{if(e.statusCode>=300)return J(e,t);const n=await parseBody(e.body,t);let r={};return r=Ci(n.GetAccessKeyInfoResult,t),{$metadata:D(e),...r}},od=async(e,t)=>{if(e.statusCode>=300)return J(e,t);const n=await parseBody(e.body,t);let r={};return r=_i(n.GetCallerIdentityResult,t),{$metadata:D(e),...r}},id=async(e,t)=>{if(e.statusCode>=300)return J(e,t);const n=await parseBody(e.body,t);let r={};return r=Ii(n.GetFederationTokenResult,t),{$metadata:D(e),...r}},ad=async(e,t)=>{if(e.statusCode>=300)return J(e,t);const n=await parseBody(e.body,t);let r={};return r=xi(n.GetSessionTokenResult,t),{$metadata:D(e),...r}},J=async(e,t)=>{const n={...e,body:await Vo(e.body,t)},r=Gi(e,n.body);switch(r){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Qo(n,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await ri(n,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await si(n,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await oi(n,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await ei(n,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await ni(n,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await Zo(n,t);case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await ti(n,t);default:const s=n.body;return Ni({output:e,parsedBody:s.Error,errorCode:r})}},Qo=async(e,t)=>{const n=e.body,r=Ai(n.Error,t),s=new ut({$metadata:D(e),...r});return q(s,n)},Zo=async(e,t)=>{const n=e.body,r=Pi(n.Error,t),s=new pt({$metadata:D(e),...r});return q(s,n)},ei=async(e,t)=>{const n=e.body,r=vi(n.Error,t),s=new yt({$metadata:D(e),...r});return q(s,n)},ti=async(e,t)=>{const n=e.body,r=Di(n.Error,t),s=new Et({$metadata:D(e),...r});return q(s,n)},ni=async(e,t)=>{const n=e.body,r=$i(n.Error,t),s=new gt({$metadata:D(e),...r});return q(s,n)},ri=async(e,t)=>{const n=e.body,r=Mi(n.Error,t),s=new ft({$metadata:D(e),...r});return q(s,n)},si=async(e,t)=>{const n=e.body,r=ki(n.Error,t),s=new ht({$metadata:D(e),...r});return q(s,n)},oi=async(e,t)=>{const n=e.body,r=Oi(n.Error,t),s=new mt({$metadata:D(e),...r});return q(s,n)},ii=(e,t)=>{const n={};if(e[Y]!=null&&(n[Y]=e[Y]),e[we]!=null&&(n[we]=e[we]),e[L]!=null){const r=je(e[L],t);e[L]?.length===0&&(n.PolicyArns=[]),Object.entries(r).forEach(([s,o])=>{const i=`PolicyArns.${s}`;n[i]=o})}if(e[F]!=null&&(n[F]=e[F]),e[k]!=null&&(n[k]=e[k]),e[Te]!=null){const r=jn(e[Te],t);e[Te]?.length===0&&(n.Tags=[]),Object.entries(r).forEach(([s,o])=>{const i=`Tags.${s}`;n[i]=o})}if(e[jt]!=null){const r=Ei(e[jt],t);e[jt]?.length===0&&(n.TransitiveTagKeys=[]),Object.entries(r).forEach(([s,o])=>{const i=`TransitiveTagKeys.${s}`;n[i]=o})}if(e[Ct]!=null&&(n[Ct]=e[Ct]),e[Re]!=null&&(n[Re]=e[Re]),e[Ae]!=null&&(n[Ae]=e[Ae]),e[B]!=null&&(n[B]=e[B]),e[Ot]!=null){const r=gi(e[Ot],t);e[Ot]?.length===0&&(n.ProvidedContexts=[]),Object.entries(r).forEach(([s,o])=>{const i=`ProvidedContexts.${s}`;n[i]=o})}return n},ai=(e,t)=>{const n={};if(e[Y]!=null&&(n[Y]=e[Y]),e[Mt]!=null&&(n[Mt]=e[Mt]),e[Bt]!=null&&(n[Bt]=e[Bt]),e[L]!=null){const r=je(e[L],t);e[L]?.length===0&&(n.PolicyArns=[]),Object.entries(r).forEach(([s,o])=>{const i=`PolicyArns.${s}`;n[i]=o})}return e[F]!=null&&(n[F]=e[F]),e[k]!=null&&(n[k]=e[k]),n},ci=(e,t)=>{const n={};if(e[Y]!=null&&(n[Y]=e[Y]),e[we]!=null&&(n[we]=e[we]),e[Vt]!=null&&(n[Vt]=e[Vt]),e[Nt]!=null&&(n[Nt]=e[Nt]),e[L]!=null){const r=je(e[L],t);e[L]?.length===0&&(n.PolicyArns=[]),Object.entries(r).forEach(([s,o])=>{const i=`PolicyArns.${s}`;n[i]=o})}return e[F]!=null&&(n[F]=e[F]),e[k]!=null&&(n[k]=e[k]),n},di=(e,t)=>{const n={};return e[_t]!=null&&(n[_t]=e[_t]),n},li=(e,t)=>{const n={};return e[pe]!=null&&(n[pe]=e[pe]),n},ui=(e,t)=>({}),fi=(e,t)=>{const n={};if(e[Dt]!=null&&(n[Dt]=e[Dt]),e[F]!=null&&(n[F]=e[F]),e[L]!=null){const r=je(e[L],t);e[L]?.length===0&&(n.PolicyArns=[]),Object.entries(r).forEach(([s,o])=>{const i=`PolicyArns.${s}`;n[i]=o})}if(e[k]!=null&&(n[k]=e[k]),e[Te]!=null){const r=jn(e[Te],t);e[Te]?.length===0&&(n.Tags=[]),Object.entries(r).forEach(([s,o])=>{const i=`Tags.${s}`;n[i]=o})}return n},hi=(e,t)=>{const n={};return e[k]!=null&&(n[k]=e[k]),e[Re]!=null&&(n[Re]=e[Re]),e[Ae]!=null&&(n[Ae]=e[Ae]),n},je=(e,t)=>{const n={};let r=1;for(const s of e){if(s===null)continue;const o=mi(s,t);Object.entries(o).forEach(([i,a])=>{n[`member.${r}.${i}`]=a}),r++}return n},mi=(e,t)=>{const n={};return e[Kt]!=null&&(n[Kt]=e[Kt]),n},yi=(e,t)=>{const n={};return e[kt]!=null&&(n[kt]=e[kt]),e[Tt]!=null&&(n[Tt]=e[Tt]),n},gi=(e,t)=>{const n={};let r=1;for(const s of e){if(s===null)continue;const o=yi(s,t);Object.entries(o).forEach(([i,a])=>{n[`member.${r}.${i}`]=a}),r++}return n},pi=(e,t)=>{const n={};return e[vt]!=null&&(n[vt]=e[vt]),e[qt]!=null&&(n[qt]=e[qt]),n},Ei=(e,t)=>{const n={};let r=1;for(const s of e)s!==null&&(n[`member.${r}`]=s,r++);return n},jn=(e,t)=>{const n={};let r=1;for(const s of e){if(s===null)continue;const o=pi(s,t);Object.entries(o).forEach(([i,a])=>{n[`member.${r}.${i}`]=a}),r++}return n},wt=(e,t)=>{const n={};return e[Rt]!=null&&(n[Rt]=x(e[Rt])),e[K]!=null&&(n[K]=x(e[K])),n},Si=(e,t)=>{const n={};return e[M]!=null&&(n[M]=ve(e[M],t)),e[V]!=null&&(n[V]=wt(e[V],t)),e[U]!=null&&(n[U]=Bn(e[U])),e[B]!=null&&(n[B]=x(e[B])),n},wi=(e,t)=>{const n={};return e[M]!=null&&(n[M]=ve(e[M],t)),e[V]!=null&&(n[V]=wt(e[V],t)),e[U]!=null&&(n[U]=__strictParseInt32(e[U])),e[Lt]!=null&&(n[Lt]=__expectString(e[Lt])),e[Wt]!=null&&(n[Wt]=__expectString(e[Wt])),e[Pt]!=null&&(n[Pt]=__expectString(e[Pt])),e[Se]!=null&&(n[Se]=__expectString(e[Se])),e[$t]!=null&&(n[$t]=__expectString(e[$t])),e[B]!=null&&(n[B]=__expectString(e[B])),n},Ri=(e,t)=>{const n={};return e[M]!=null&&(n[M]=ve(e[M],t)),e[Ht]!=null&&(n[Ht]=x(e[Ht])),e[V]!=null&&(n[V]=wt(e[V],t)),e[U]!=null&&(n[U]=Bn(e[U])),e[Ft]!=null&&(n[Ft]=x(e[Ft])),e[Se]!=null&&(n[Se]=x(e[Se])),e[B]!=null&&(n[B]=x(e[B])),n},ve=(e,t)=>{const n={};return e[pe]!=null&&(n[pe]=x(e[pe])),e[Ut]!=null&&(n[Ut]=x(e[Ut])),e[zt]!=null&&(n[zt]=x(e[zt])),e[bt]!=null&&(n[bt]=ao(po(e[bt]))),n},Ti=(e,t)=>{const n={};return e[At]!=null&&(n[At]=__expectString(e[At])),n},Ai=(e,t)=>{const n={};return e[C]!=null&&(n[C]=x(e[C])),n},bi=(e,t)=>{const n={};return e[xt]!=null&&(n[xt]=__expectString(e[xt])),e[K]!=null&&(n[K]=__expectString(e[K])),n},Ci=(e,t)=>{const n={};return e[Ee]!=null&&(n[Ee]=__expectString(e[Ee])),n},_i=(e,t)=>{const n={};return e[Gt]!=null&&(n[Gt]=__expectString(e[Gt])),e[Ee]!=null&&(n[Ee]=__expectString(e[Ee])),e[K]!=null&&(n[K]=__expectString(e[K])),n},Ii=(e,t)=>{const n={};return e[M]!=null&&(n[M]=ve(e[M],t)),e[It]!=null&&(n[It]=bi(e[It],t)),e[U]!=null&&(n[U]=__strictParseInt32(e[U])),n},xi=(e,t)=>{const n={};return e[M]!=null&&(n[M]=ve(e[M],t)),n},Pi=(e,t)=>{const n={};return e[C]!=null&&(n[C]=x(e[C])),n},vi=(e,t)=>{const n={};return e[C]!=null&&(n[C]=x(e[C])),n},Di=(e,t)=>{const n={};return e[C]!=null&&(n[C]=x(e[C])),n},$i=(e,t)=>{const n={};return e[C]!=null&&(n[C]=x(e[C])),n},Mi=(e,t)=>{const n={};return e[C]!=null&&(n[C]=x(e[C])),n},ki=(e,t)=>{const n={};return e[C]!=null&&(n[C]=x(e[C])),n},Oi=(e,t)=>{const n={};return e[C]!=null&&(n[C]=x(e[C])),n},D=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),cd=(e,t)=>collectBody(e,t).then(n=>t.utf8Encoder(n)),Ni=vo(W),Q=async(e,t,n,r,s)=>{const{hostname:o,protocol:i="https",port:a,path:c}=await e.endpoint(),u={protocol:i,hostname:o,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+n:c+n,headers:t};return r!==void 0&&(u.hostname=r),s!==void 0&&(u.body=s),new ce(u)},Z={"content-type":"application/x-www-form-urlencoded"},ee="2011-06-15",te="Action",pe="AccessKeyId",Fi="AssumeRole",Rt="AssumedRoleId",V="AssumedRoleUser",Li="AssumeRoleWithSAML",Ui="AssumeRoleWithWebIdentity",Ee="Account",K="Arn",Se="Audience",M="Credentials",Tt="ContextAssertion",Bi="DecodeAuthorizationMessage",At="DecodedMessage",k="DurationSeconds",bt="Expiration",Ct="ExternalId",_t="EncodedMessage",It="FederatedUser",xt="FederatedUserId",Hi="GetAccessKeyInfo",Wi="GetCallerIdentity",zi="GetFederationToken",ji="GetSessionToken",Pt="Issuer",vt="Key",Dt="Name",$t="NameQualifier",F="Policy",L="PolicyArns",Mt="PrincipalArn",kt="ProviderArn",Ot="ProvidedContexts",Nt="ProviderId",U="PackedPolicySize",Ft="Provider",Y="RoleArn",we="RoleSessionName",Lt="Subject",Ut="SecretAccessKey",Bt="SAMLAssertion",Ht="SubjectFromWebIdentityToken",B="SourceIdentity",Re="SerialNumber",Wt="SubjectType",zt="SessionToken",Te="Tags",Ae="TokenCode",jt="TransitiveTagKeys",Gt="UserId",ne="Version",qt="Value",Vt="WebIdentityToken",Kt="arn",C="message",re=e=>Object.entries(e).map(([t,n])=>Wn(t)+"="+Wn(n)).join("&"),Gi=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"};class qi extends rt.classBuilder().ep({...zn}).m(function(t,n,r,s){return[wn(r,this.serialize,this.deserialize),Rn(r,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Ho).ser(Ko).de(Xo).build(){}class Vi extends rt.classBuilder().ep({...zn}).m(function(t,n,r,s){return[wn(r,this.serialize,this.deserialize),Rn(r,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Wo,zo).ser(Yo).de(Jo).build(){}const Gn="us-east-1",qn=e=>{if(typeof e?.Arn=="string"){const t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},Vn=async(e,t,n)=>{const r=typeof e=="function"?await e():e,s=typeof t=="function"?await t():t;return n?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${r} (provider)`,`${s} (parent client)`,`${Gn} (STS default)`),r??s??Gn},Kn=(e,t)=>{let n,r;return async(s,o)=>{if(r=s,!n){const{logger:u=e?.parentClientConfig?.logger,region:f,requestHandler:d=e?.parentClientConfig?.requestHandler,credentialProviderLogger:l}=e,h=await Vn(f,e?.parentClientConfig?.region,l),E=!Xn(d);n=new t({credentialDefaultProvider:()=>async()=>r,region:h,requestHandler:E?d:void 0,logger:u})}const{Credentials:i,AssumedRoleUser:a}=await n.send(new qi(o));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);const c=qn(a);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...c&&{accountId:c}}}},Yn=(e,t)=>{let n;return async r=>{if(!n){const{logger:a=e?.parentClientConfig?.logger,region:c,requestHandler:u=e?.parentClientConfig?.requestHandler,credentialProviderLogger:f}=e,d=await Vn(c,e?.parentClientConfig?.region,f),l=!Xn(u);n=new t({region:d,requestHandler:l?u:void 0,logger:a})}const{Credentials:s,AssumedRoleUser:o}=await n.send(new Vi(r));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${r.RoleArn}`);const i=qn(o);return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration,...s.CredentialScope&&{credentialScope:s.CredentialScope},...i&&{accountId:i}}}},dd=e=>t=>e({roleAssumer:Kn(t,t.stsClientCtor),roleAssumerWithWebIdentity:Yn(t,t.stsClientCtor),...t}),Xn=e=>e?.metadata?.handlerProtocol==="h2";var Jn=w(8654),Ki=w(46170),Yi=w(46640),Qn=w(16600),De=w(42706),$e=w(30196),Xi=w(53188),se;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(se||(se={}));const Me=3,Zn=se.STANDARD,Ji=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Qi=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Zi=["TimeoutError","RequestTimeout","RequestTimeoutException"],ea=[500,502,503,504],ta=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],na=e=>e.$retryable!==void 0,ra=e=>Ji.includes(e.name),sa=e=>e.$metadata?.clockSkewCorrected,Ge=e=>e.$metadata?.httpStatusCode===429||Qi.includes(e.name)||e.$retryable?.throttling==!0,Yt=e=>sa(e)||Zi.includes(e.name)||ta.includes(e?.code||"")||ea.includes(e.$metadata?.httpStatusCode||0),oa=e=>{if(e.$metadata?.httpStatusCode!==void 0){const t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!Yt(e)}return!1};class er{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;const n=this.getCurrentTimeInSeconds();this.lastThrottleTime=n,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(!!this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){const n=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(r=>setTimeout(r,n))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){const t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}const n=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+n),this.lastTimestamp=t}updateClientSendingRate(t){let n;if(this.updateMeasuredRate(),Ge(t)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());const r=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const t=this.getCurrentTimeInSeconds(),n=Math.floor(t*2)/2;if(this.requestCount++,n>this.lastTxRateBucket){const r=this.requestCount/(n-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(r*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=n}}getPrecise(t){return parseFloat(t.toFixed(8))}}const ke=100,Xt=20*1e3,tr=500,Jt=500,nr=5,rr=10,sr=1,or="amz-sdk-invocation-id",ir="amz-sdk-request",ia=()=>{let e=ke;return{computeNextBackoffDelay:r=>Math.floor(Math.min(Xt,Math.random()*2**r*e)),setDelayBase:r=>{e=r}}},ar=({retryDelay:e,retryCount:t,retryCost:n})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(Xt,e),getRetryCost:()=>n});class Qt{constructor(t){this.maxAttempts=t,this.mode=se.STANDARD,this.capacity=Jt,this.retryBackoffStrategy=ia(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return ar({retryDelay:ke,retryCount:0})}async refreshRetryTokenForRetry(t,n){const r=await this.getMaxAttempts();if(this.shouldRetry(t,n,r)){const s=n.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?tr:ke);const o=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=n.retryAfterHint?Math.max(n.retryAfterHint.getTime()-Date.now()||0,o):o,a=this.getCapacityCost(s);return this.capacity-=a,ar({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(Jt,this.capacity+(t.getRetryCost()??sr))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Me}`),Me}}shouldRetry(t,n,r){return t.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(n.errorType)&&this.isRetryableError(n.errorType)}getCapacityCost(t){return t==="TRANSIENT"?rr:nr}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}}class aa{constructor(t,n){this.maxAttemptsProvider=t,this.mode=se.ADAPTIVE;const{rateLimiter:r}=n??{};this.rateLimiter=r??new er,this.standardRetryStrategy=new Qt(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,n){return this.rateLimiter.updateClientSendingRate(n),this.standardRetryStrategy.refreshRetryTokenForRetry(t,n)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}}class ld extends Qt{constructor(t,n=ke){super(typeof t=="function"?t:async()=>t),typeof n=="number"?this.computeNextBackoffDelay=()=>n:this.computeNextBackoffDelay=n}async refreshRetryTokenForRetry(t,n){const r=await super.refreshRetryTokenForRetry(t,n);return r.getRetryDelay=()=>this.computeNextBackoffDelay(r.getRetryCount()),r}}var cr=w(3682);const ca=(e,t)=>{const n=e,r=t?.noRetryIncrement??sr,s=t?.retryCost??nr,o=t?.timeoutRetryCost??rr;let i=e;const a=d=>d.name==="TimeoutError"?o:s,c=d=>a(d)<=i;return Object.freeze({hasRetryTokens:c,retrieveRetryTokens:d=>{if(!c(d))throw new Error("No retry token available");const l=a(d);return i-=l,l},releaseRetryTokens:d=>{i+=d??r,i=Math.min(i,n)}})},da=(e,t)=>Math.floor(Math.min(Xt,Math.random()*2**t*e)),la=e=>e?na(e)||ra(e)||Ge(e)||Yt(e):!1,dr=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);class ua{constructor(t,n){this.maxAttemptsProvider=t,this.mode=se.STANDARD,this.retryDecider=n?.retryDecider??la,this.delayDecider=n?.delayDecider??da,this.retryQuota=n?.retryQuota??ca(Jt)}shouldRetry(t,n,r){return n<r&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)}async getMaxAttempts(){let t;try{t=await this.maxAttemptsProvider()}catch{t=Me}return t}async retry(t,n,r){let s,o=0,i=0;const a=await this.getMaxAttempts(),{request:c}=n;for(ce.isInstance(c)&&(c.headers[or]=(0,cr.A)());;)try{ce.isInstance(c)&&(c.headers[ir]=`attempt=${o+1}; max=${a}`),r?.beforeRequest&&await r.beforeRequest();const{response:u,output:f}=await t(n);return r?.afterRequest&&r.afterRequest(u),this.retryQuota.releaseRetryTokens(s),f.$metadata.attempts=o+1,f.$metadata.totalRetryDelay=i,{response:u,output:f}}catch(u){const f=dr(u);if(o++,this.shouldRetry(f,o,a)){s=this.retryQuota.retrieveRetryTokens(f);const d=this.delayDecider(Ge(f)?tr:ke,o),l=fa(f.$response),h=Math.max(l||0,d);i+=h,await new Promise(E=>setTimeout(E,h));continue}throw f.$metadata||(f.$metadata={}),f.$metadata.attempts=o,f.$metadata.totalRetryDelay=i,f}}}const fa=e=>{if(!Je.isInstance(e))return;const t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;const n=e.headers[t],r=Number(n);return Number.isNaN(r)?new Date(n).getTime()-Date.now():r*1e3};class ud extends ua{constructor(t,n){const{rateLimiter:r,...s}=n??{};super(t,s),this.rateLimiter=r??new er,this.mode=se.ADAPTIVE}async retry(t,n){return super.retry(t,n,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:r=>{this.rateLimiter.updateClientSendingRate(r)}})}}const lr="AWS_MAX_ATTEMPTS",ur="max_attempts",ha={environmentVariableSelector:e=>{const t=e[lr];if(!t)return;const n=parseInt(t);if(Number.isNaN(n))throw new Error(`Environment variable ${lr} mast be a number, got "${t}"`);return n},configFileSelector:e=>{const t=e[ur];if(!t)return;const n=parseInt(t);if(Number.isNaN(n))throw new Error(`Shared config file entry ${ur} mast be a number, got "${t}"`);return n},default:Me},ma=e=>{const{retryStrategy:t}=e,n=he(e.maxAttempts??Me);return{...e,maxAttempts:n,retryStrategy:async()=>t||(await he(e.retryMode)()===se.ADAPTIVE?new aa(n):new Qt(n))}},ya="AWS_RETRY_MODE",ga="retry_mode",pa={environmentVariableSelector:e=>e[ya],configFileSelector:e=>e[ga],default:Zn},Ea=()=>e=>async t=>{const{request:n}=t;return HttpRequest.isInstance(n)&&(delete n.headers[INVOCATION_ID_HEADER],delete n.headers[REQUEST_HEADER]),e(t)},Sa={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},fd=e=>({applyToStack:t=>{t.addRelativeTo(Ea(),Sa)}}),wa=e=>e?.body instanceof Le.Readable||typeof ReadableStream<"u"&&e?.body instanceof ReadableStream,Ra=e=>(t,n)=>async r=>{let s=await e.retryStrategy();const o=await e.maxAttempts();if(Ta(s)){s=s;let i=await s.acquireInitialRetryToken(n.partition_id),a=new Error,c=0,u=0;const{request:f}=r,d=ce.isInstance(f);for(d&&(f.headers[or]=(0,cr.A)());;)try{d&&(f.headers[ir]=`attempt=${c+1}; max=${o}`);const{response:l,output:h}=await t(r);return s.recordSuccess(i),h.$metadata.attempts=c+1,h.$metadata.totalRetryDelay=u,{response:l,output:h}}catch(l){const h=Aa(l);if(a=dr(l),d&&wa(f))throw(n.logger instanceof Tn?console:n.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await s.refreshRetryTokenForRetry(i,h)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=u,a}c=i.getRetryCount();const E=i.getRetryDelay();u+=E,await new Promise(b=>setTimeout(b,E))}}else return s=s,s?.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(t,r)},Ta=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",Aa=e=>{const t={error:e,errorType:ba(e)},n=Ia(e.$response);return n&&(t.retryAfterHint=n),t},ba=e=>Ge(e)?"THROTTLING":Yt(e)?"TRANSIENT":oa(e)?"SERVER_ERROR":"CLIENT_ERROR",Ca={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},_a=e=>({applyToStack:t=>{t.add(Ra(e),Ca)}}),Ia=e=>{if(!Je.isInstance(e))return;const t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;const n=e.headers[t],r=Number(n);return Number.isNaN(r)?new Date(n):new Date(r*1e3)};var xa=w(50784);const Pa=async(e,t,n)=>({operation:En(t).operation,region:await he(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function va(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,n)=>({signingProperties:{config:t,context:n}})}}function fr(e){return{schemeId:"smithy.api#noAuth"}}const Da=e=>{const t=[];switch(e.operation){case"AssumeRoleWithSAML":{t.push(fr(e));break}case"AssumeRoleWithWebIdentity":{t.push(fr(e));break}default:t.push(va(e))}return t},$a=e=>({...e,stsClientCtor:nn}),Ma=e=>{const t=$a(e);return{...(0,xa.h)(t)}},ka={rE:"3.637.0"};var Oa=w(68227),hr=w(59065),mr=w(34054),Na=w(58102),Fa=w(51461),La=w(88226),Ua=w(6775),yr=w(76976);const gr="required",p="type",R="fn",T="argv",oe="ref",pr=!1,Zt=!0,ie="booleanEquals",P="stringEquals",Er="sigv4",Sr="sts",wr="us-east-1",_="endpoint",Rr="https://sts.{Region}.{PartitionResult#dnsSuffix}",G="tree",be="error",en="getAttr",Tr={[gr]:!1,[p]:"String"},tn={[gr]:!0,default:!1,[p]:"Boolean"},Ar={[oe]:"Endpoint"},br={[R]:"isSet",[T]:[{[oe]:"Region"}]},v={[oe]:"Region"},Cr={[R]:"aws.partition",[T]:[v],assign:"PartitionResult"},_r={[oe]:"UseFIPS"},Ir={[oe]:"UseDualStack"},$={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:Er,signingName:Sr,signingRegion:wr}]},headers:{}},O={},xr={conditions:[{[R]:P,[T]:[v,"aws-global"]}],[_]:$,[p]:_},Pr={[R]:ie,[T]:[_r,!0]},vr={[R]:ie,[T]:[Ir,!0]},Dr={[R]:en,[T]:[{[oe]:"PartitionResult"},"supportsFIPS"]},$r={[oe]:"PartitionResult"},Mr={[R]:ie,[T]:[!0,{[R]:en,[T]:[$r,"supportsDualStack"]}]},kr=[{[R]:"isSet",[T]:[Ar]}],Or=[Pr],Nr=[vr],Ba={version:"1.0",parameters:{Region:Tr,UseDualStack:tn,UseFIPS:tn,Endpoint:Tr,UseGlobalEndpoint:tn},rules:[{conditions:[{[R]:ie,[T]:[{[oe]:"UseGlobalEndpoint"},Zt]},{[R]:"not",[T]:kr},br,Cr,{[R]:ie,[T]:[_r,pr]},{[R]:ie,[T]:[Ir,pr]}],rules:[{conditions:[{[R]:P,[T]:[v,"ap-northeast-1"]}],endpoint:$,[p]:_},{conditions:[{[R]:P,[T]:[v,"ap-south-1"]}],endpoint:$,[p]:_},{conditions:[{[R]:P,[T]:[v,"ap-southeast-1"]}],endpoint:$,[p]:_},{conditions:[{[R]:P,[T]:[v,"ap-southeast-2"]}],endpoint:$,[p]:_},xr,{conditions:[{[R]:P,[T]:[v,"ca-central-1"]}],endpoint:$,[p]:_},{conditions:[{[R]:P,[T]:[v,"eu-central-1"]}],endpoint:$,[p]:_},{conditions:[{[R]:P,[T]:[v,"eu-north-1"]}],endpoint:$,[p]:_},{conditions:[{[R]:P,[T]:[v,"eu-west-1"]}],endpoint:$,[p]:_},{conditions:[{[R]:P,[T]:[v,"eu-west-2"]}],endpoint:$,[p]:_},{conditions:[{[R]:P,[T]:[v,"eu-west-3"]}],endpoint:$,[p]:_},{conditions:[{[R]:P,[T]:[v,"sa-east-1"]}],endpoint:$,[p]:_},{conditions:[{[R]:P,[T]:[v,wr]}],endpoint:$,[p]:_},{conditions:[{[R]:P,[T]:[v,"us-east-2"]}],endpoint:$,[p]:_},{conditions:[{[R]:P,[T]:[v,"us-west-1"]}],endpoint:$,[p]:_},{conditions:[{[R]:P,[T]:[v,"us-west-2"]}],endpoint:$,[p]:_},{endpoint:{url:Rr,properties:{authSchemes:[{name:Er,signingName:Sr,signingRegion:"{Region}"}]},headers:O},[p]:_}],[p]:G},{conditions:kr,rules:[{conditions:Or,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[p]:be},{conditions:Nr,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[p]:be},{endpoint:{url:Ar,properties:O,headers:O},[p]:_}],[p]:G},{conditions:[br],rules:[{conditions:[Cr],rules:[{conditions:[Pr,vr],rules:[{conditions:[{[R]:ie,[T]:[Zt,Dr]},Mr],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:O,headers:O},[p]:_}],[p]:G},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[p]:be}],[p]:G},{conditions:Or,rules:[{conditions:[{[R]:ie,[T]:[Dr,Zt]}],rules:[{conditions:[{[R]:P,[T]:[{[R]:en,[T]:[$r,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:O,headers:O},[p]:_},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:O,headers:O},[p]:_}],[p]:G},{error:"FIPS is enabled but this partition does not support FIPS",[p]:be}],[p]:G},{conditions:Nr,rules:[{conditions:[Mr],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:O,headers:O},[p]:_}],[p]:G},{error:"DualStack is enabled but this partition does not support DualStack",[p]:be}],[p]:G},xr,{endpoint:{url:Rr,properties:O,headers:O},[p]:_}],[p]:G}],[p]:G},{error:"Invalid Configuration: Missing Region",[p]:be}]},Ha=(e,t={})=>(0,yr.sO)(Ba,{endpointParams:e,logger:t.logger});yr.mw.aws=Ua.UF;const Wa=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??Ms,base64Encoder:e?.base64Encoder??Fs,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Ha,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Da,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new hr.f2},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new $e.mR}],logger:e?.logger??new Tn,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??Ne,utf8Decoder:e?.utf8Decoder??_n,utf8Encoder:e?.utf8Encoder??Ns});var za=w(78075);const ja=e=>{Mo(process.version);const t=(0,za.I)(e),n=()=>t().then($o),r=Wa(e);return(0,Oa.I)(process.version),{...r,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??La.n,credentialDefaultProvider:e?.credentialDefaultProvider??mr.v6,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Na.mJ)({serviceId:r.serviceId,clientVersion:ka.rE}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4")||(async o=>await(0,mr.v6)(o?.__config||{})()),signer:new hr.f2},{schemeId:"smithy.api#noAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new $e.mR}],maxAttempts:e?.maxAttempts??fe(ha),region:e?.region??fe(De.GG,De.zH),requestHandler:Ue.create(e?.requestHandler??n),retryMode:e?.retryMode??fe({...pa,default:async()=>(await n()).retryMode||Zn}),sha256:e?.sha256??Fa.V.bind(null,"sha256"),streamCollector:e?.streamCollector??Js,useDualstackEndpoint:e?.useDualstackEndpoint??fe(De.e$),useFipsEndpoint:e?.useFipsEndpoint??fe(De.Ko)}};var Fr=w(3119);const Ga=e=>{const t=e.httpAuthSchemes;let n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(s){const o=t.findIndex(i=>i.schemeId===s.schemeId);o===-1?t.push(s):t.splice(o,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){n=s},httpAuthSchemeProvider(){return n},setCredentials(s){r=s},credentials(){return r}}},qa=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),qe=e=>e,Va=(e,t)=>{const n={...qe((0,Fr.Rq)(e)),...qe(Lo(e)),...qe(Ls(e)),...qe(Ga(e))};return t.forEach(r=>r.configure(n)),{...e,...(0,Fr.$3)(n),...Uo(n),...Us(n),...qa(n)}};class nn extends Ps{constructor(...[t]){const n=ja(t||{}),r=Bo(n),s=(0,Qn.Dc)(r),o=ma(s),i=(0,De.TD)(o),a=(0,Jn.OV)(i),c=xs(a),u=Ma(c),f=Va(u,t?.extensions||[]);super(f),this.config=f,this.middlewareStack.use((0,Qn.sM)(this.config)),this.middlewareStack.use(_a(this.config)),this.middlewareStack.use((0,Xi.vK)(this.config)),this.middlewareStack.use((0,Jn.TC)(this.config)),this.middlewareStack.use((0,Ki.Y7)(this.config)),this.middlewareStack.use((0,Yi.n4)(this.config)),this.middlewareStack.use((0,$e.wB)(this.config,{httpAuthSchemeParametersProvider:Pa,identityProviderConfigProvider:async d=>new $e.h$({"aws.auth#sigv4":d.credentials})})),this.middlewareStack.use((0,$e.lW)(this.config))}destroy(){super.destroy()}}const Lr=(e,t)=>t?class extends e{constructor(r){super(r);for(const s of t)this.middlewareStack.use(s)}}:e,Ur=(e={},t)=>Kn(e,Lr(nn,t)),Br=(e={},t)=>Yn(e,Lr(nn,t)),md=e=>t=>e({roleAssumer:Ur(t),roleAssumerWithWebIdentity:Br(t),...t})}};
