"use strict";exports.id=607,exports.ids=[607],exports.modules={46607:(qt,xe,R)=>{R.d(xe,{fromHttp:()=>zt});var re;(function(e){e.HEADER="header",e.QUERY="query"})(re||(re={}));var ne;(function(e){e.HEADER="header",e.QUERY="query"})(ne||(ne={}));var oe;(function(e){e.HTTP="http",e.HTTPS="https"})(oe||(oe={}));var P;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(P||(P={}));const Jt=e=>{const t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>P.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>P.MD5,checksumConstructor:()=>e.md5}),{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},Yt=e=>{const t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},Gt=e=>({...getChecksumConfiguration(e)}),Zt=e=>({...resolveChecksumRuntimeConfig(e)});var se;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(se||(se={}));var ie;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(ie||(ie={}));var ae;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(ae||(ae={}));class Vt{constructor({name:t,kind:r=FieldPosition.HEADER,values:n=[]}){this.name=t,this.kind=r,this.values=n}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter(r=>r!==t)}toString(){return this.values.map(t=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}}class v{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){const r=new v({...t,headers:{...t.headers}});return r.query&&(r.query=$e(r.query)),r}static isInstance(t){if(!t)return!1;const r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return v.clone(this)}}function $e(e){return Object.keys(e).reduce((t,r)=>{const n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}class Ie{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;const r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}const j=e=>encodeURIComponent(e).replace(/[!'()*]/g,Ne),Ne=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;function Oe(e){const t=[];for(let r of Object.keys(e).sort()){const n=e[r];if(r=j(r),Array.isArray(n))for(let o=0,s=n.length;o<s;o++)t.push(`${r}=${j(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${j(n)}`),t.push(o)}}return t.join("&")}var z=R(58611),K=R(65692);const ke=["ECONNRESET","EPIPE","ETIMEDOUT"],Ue=e=>{const t={};for(const r of Object.keys(e)){const n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t},Me=(e,t,r=0)=>{if(!r)return;const n=setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r);e.on("socket",o=>{o.connecting?o.on("connect",()=>{clearTimeout(n)}):clearTimeout(n)})},Pe=(e,{keepAlive:t,keepAliveMsecs:r})=>{t===!0&&e.on("socket",n=>{n.setKeepAlive(t,r||0)})},ve=(e,t,r=0)=>{e.setTimeout(r,()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})};var O=R(2203);const ce=1e3;async function Le(e,t,r=ce){const n=t.headers??{},o=n.Expect||n.expect;let s=-1,i=!1;o==="100-continue"&&await Promise.race([new Promise(a=>{s=Number(setTimeout(a,Math.max(ce,r)))}),new Promise(a=>{e.on("continue",()=>{clearTimeout(s),a()}),e.on("error",()=>{i=!0,clearTimeout(s),a()})})]),i||De(e,t.body)}function De(e,t){if(t instanceof O.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}const r=t;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}const Qt=0;class L{static create(t){return typeof t?.handle=="function"?t:new L(t)}static checkSocketUsage(t,r,n=console){const{sockets:o,requests:s,maxSockets:i}=t;if(typeof i!="number"||i===1/0)return r;const a=15e3;if(Date.now()-a<r)return r;if(o&&s)for(const u in o){const p=o[u]?.length??0,g=s[u]?.length??0;if(p>=i&&g>=2*i)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${p} and ${g} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}constructor(t){this.socketWarningTimestamp=0,this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(this.resolveDefaultConfig(o))}).catch(n):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){const{requestTimeout:r,connectionTimeout:n,socketTimeout:o,httpAgent:s,httpsAgent:i}=t||{},a=!0,u=50;return{connectionTimeout:n,requestTimeout:r??o,httpAgent:(()=>s instanceof z.Agent||typeof s?.destroy=="function"?s:new z.Agent({keepAlive:a,maxSockets:u,...s}))(),httpsAgent:(()=>i instanceof K.Agent||typeof i?.destroy=="function"?i:new K.Agent({keepAlive:a,maxSockets:u,...i}))(),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r}={}){this.config||(this.config=await this.configProvider);let n;return new Promise((o,s)=>{let i;const a=async l=>{await i,clearTimeout(n),o(l)},u=async l=>{await i,clearTimeout(n),s(l)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r?.aborted){const l=new Error("Request aborted");l.name="AbortError",u(l);return}const p=t.protocol==="https:",g=p?this.config.httpsAgent:this.config.httpAgent;n=setTimeout(()=>{this.socketWarningTimestamp=L.checkSocketUsage(g,this.socketWarningTimestamp,this.config.logger)},this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2e3)+(this.config.connectionTimeout??1e3));const c=Oe(t.query||{});let f;if(t.username!=null||t.password!=null){const l=t.username??"",y=t.password??"";f=`${l}:${y}`}let h=t.path;c&&(h+=`?${c}`),t.fragment&&(h+=`#${t.fragment}`);const w={headers:t.headers,host:t.hostname,method:t.method,path:h,port:t.port,agent:g,auth:f},d=(p?K.request:z.request)(w,l=>{const y=new Ie({statusCode:l.statusCode||-1,reason:l.statusMessage,headers:Ue(l.headers),body:l});a({response:y})});if(d.on("error",l=>{ke.includes(l.code)?u(Object.assign(l,{name:"TimeoutError"})):u(l)}),Me(d,u,this.config.connectionTimeout),ve(d,u,this.config.requestTimeout),r){const l=()=>{d.destroy();const y=new Error("Request aborted");y.name="AbortError",u(y)};if(typeof r.addEventListener=="function"){const y=r;y.addEventListener("abort",l,{once:!0}),d.once("close",()=>y.removeEventListener("abort",l))}else r.onabort=l}const m=w.agent;typeof m=="object"&&"keepAlive"in m&&Pe(d,{keepAlive:m.keepAlive,keepAliveMsecs:m.keepAliveMsecs}),i=Le(d,t,this.config.requestTimeout).catch(l=>(clearTimeout(n),s(l)))})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}}var Xt=R(85675);class er{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(const r of this.sessions)r===t&&(r.destroyed||r.destroy())}}class tr{constructor(t){if(this.sessionCache=new Map,this.config=t,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}lease(t,r){const n=this.getUrlString(t),o=this.sessionCache.get(n);if(o){const u=o.poll();if(u&&!this.config.disableConcurrency)return u}const s=http2.connect(n);this.config.maxConcurrency&&s.settings({maxConcurrentStreams:this.config.maxConcurrency},u=>{if(u)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+t.destination.toString())}),s.unref();const i=()=>{s.destroy(),this.deleteSession(n,s)};s.on("goaway",i),s.on("error",i),s.on("frameError",i),s.on("close",()=>this.deleteSession(n,s)),r.requestTimeout&&s.setTimeout(r.requestTimeout,i);const a=this.sessionCache.get(n)||new NodeHttp2ConnectionPool;return a.offerLast(s),this.sessionCache.set(n,a),s}deleteSession(t,r){const n=this.sessionCache.get(t);!n||!n.contains(r)||(n.remove(r),this.sessionCache.set(t,n))}release(t,r){const n=this.getUrlString(t);this.sessionCache.get(n)?.offerLast(r)}destroy(){for(const[t,r]of this.sessionCache){for(const n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(t)}}setMaxConcurrentStreams(t){if(this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=t}setDisableConcurrentStreams(t){this.config.disableConcurrency=t}getUrlString(t){return t.destination.toString()}}class fe{static create(t){return typeof t?.handle=="function"?t:new fe(t)}constructor(t){this.metadata={handlerProtocol:"h2"},this.connectionManager=new NodeHttp2ConnectionManager({}),this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(o||{})}).catch(n):r(t||{})})}destroy(){this.connectionManager.destroy()}async handle(t,{abortSignal:r}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));const{requestTimeout:n,disableConcurrentStreams:o}=this.config;return new Promise((s,i)=>{let a=!1,u;const p=async T=>{await u,s(T)},g=async T=>{await u,i(T)};if(r?.aborted){a=!0;const T=new Error("Request aborted");T.name="AbortError",g(T);return}const{hostname:c,method:f,port:h,protocol:w,query:E}=t;let d="";if(t.username!=null||t.password!=null){const T=t.username??"",A=t.password??"";d=`${T}:${A}@`}const m=`${w}//${d}${c}${h?`:${h}`:""}`,l={destination:new URL(m)},y=this.connectionManager.lease(l,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:o||!1}),b=T=>{o&&this.destroySession(y),a=!0,g(T)},S=buildQueryString(E||{});let N=t.path;S&&(N+=`?${S}`),t.fragment&&(N+=`#${t.fragment}`);const C=y.request({...t.headers,[constants.HTTP2_HEADER_PATH]:N,[constants.HTTP2_HEADER_METHOD]:f});if(y.ref(),C.on("response",T=>{const A=new HttpResponse({statusCode:T[":status"]||-1,headers:getTransformedHeaders(T),body:C});a=!0,p({response:A}),o&&(y.close(),this.connectionManager.deleteSession(m,y))}),n&&C.setTimeout(n,()=>{C.close();const T=new Error(`Stream timed out because of no activity for ${n} ms`);T.name="TimeoutError",b(T)}),r){const T=()=>{C.close();const A=new Error("Request aborted");A.name="AbortError",b(A)};if(typeof r.addEventListener=="function"){const A=r;A.addEventListener("abort",T,{once:!0}),C.once("close",()=>A.removeEventListener("abort",T))}else r.onabort=T}C.on("frameError",(T,A,Kt)=>{b(new Error(`Frame type id ${T} in stream id ${Kt} has failed with code ${A}.`))}),C.on("error",b),C.on("aborted",()=>{b(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${C.rstCode}.`))}),C.on("close",()=>{y.unref(),o&&y.destroy(),a||b(new Error("Unexpected error: http2 request did not get a response"))}),u=writeRequestBody(C,t,n)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(t){t.destroyed||t.destroy()}}class Be extends O.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,r,n){this.bufferedBytes.push(t),n()}}const Fe=e=>He(e)?We(e):new Promise((t,r)=>{const n=new Be;e.pipe(n),e.on("error",o=>{n.end(),r(o)}),n.on("error",r),n.on("finish",function(){const o=new Uint8Array(Buffer.concat(this.bufferedBytes));t(o)})}),He=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;async function We(e){const t=[],r=e.getReader();let n=!1,o=0;for(;!n;){const{done:a,value:u}=await r.read();u&&(t.push(u),o+=u.length),n=a}const s=new Uint8Array(o);let i=0;for(const a of t)s.set(a,i),i+=a.length;return s}class D extends Error{constructor(t,r=!0){let n,o=!0;typeof r=="boolean"?(n=void 0,o=r):r!=null&&typeof r=="object"&&(n=r.logger,o=r.tryNextLink??!0),super(t),this.name="ProviderError",this.tryNextLink=o,Object.setPrototypeOf(this,D.prototype),n?.debug?.(`@smithy/property-provider ${o?"->":"(!)"} ${t}`)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}}class x extends D{constructor(t,r=!0){super(t,r),this.name="CredentialsProviderError",Object.setPrototypeOf(this,x.prototype)}}class ue extends D{constructor(t,r=!0){super(t,r),this.name="TokenProviderError",Object.setPrototypeOf(this,ue.prototype)}}const rr=(...e)=>async()=>{if(e.length===0)throw new ProviderError("No providers in chain");let t;for(const r of e)try{return await r()}catch(n){if(t=n,n?.tryNextLink)continue;throw n}throw t};var je=R(91943),ze=R.n(je);const nr="127.0.0.0/8",or="::1/128",Ke="169.254.170.2",qe="169.254.170.23",Je="[fd00:ec2::23]",Ye=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===Ke||e.hostname===qe||e.hostname===Je)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;const r=e.hostname.split("."),n=o=>{const s=parseInt(o,10);return 0<=s&&s<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new x(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}},I=(e,t)=>{const r=[];if(e&&r.push(e),t)for(const n of t)r.push(n);return r},$=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,de=()=>{let e=[],t=[],r=!1;const n=new Set,o=c=>c.sort((f,h)=>le[h.step]-le[f.step]||he[h.priority||"normal"]-he[f.priority||"normal"]),s=c=>{let f=!1;const h=w=>{const E=I(w.name,w.aliases);if(E.includes(c)){f=!0;for(const d of E)n.delete(d);return!1}return!0};return e=e.filter(h),t=t.filter(h),f},i=c=>{let f=!1;const h=w=>{if(w.middleware===c){f=!0;for(const E of I(w.name,w.aliases))n.delete(E);return!1}return!0};return e=e.filter(h),t=t.filter(h),f},a=c=>(e.forEach(f=>{c.add(f.middleware,{...f})}),t.forEach(f=>{c.addRelativeTo(f.middleware,{...f})}),c.identifyOnResolve?.(g.identifyOnResolve()),c),u=c=>{const f=[];return c.before.forEach(h=>{h.before.length===0&&h.after.length===0?f.push(h):f.push(...u(h))}),f.push(c),c.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?f.push(h):f.push(...u(h))}),f},p=(c=!1)=>{const f=[],h=[],w={};return e.forEach(d=>{const m={...d,before:[],after:[]};for(const l of I(m.name,m.aliases))w[l]=m;f.push(m)}),t.forEach(d=>{const m={...d,before:[],after:[]};for(const l of I(m.name,m.aliases))w[l]=m;h.push(m)}),h.forEach(d=>{if(d.toMiddleware){const m=w[d.toMiddleware];if(m===void 0){if(c)return;throw new Error(`${d.toMiddleware} is not found when adding ${$(d.name,d.aliases)} middleware ${d.relation} ${d.toMiddleware}`)}d.relation==="after"&&m.after.push(d),d.relation==="before"&&m.before.push(d)}}),o(f).map(u).reduce((d,m)=>(d.push(...m),d),[])},g={add:(c,f={})=>{const{name:h,override:w,aliases:E}=f,d={step:"initialize",priority:"normal",middleware:c,...f},m=I(h,E);if(m.length>0){if(m.some(l=>n.has(l))){if(!w)throw new Error(`Duplicate middleware name '${$(h,E)}'`);for(const l of m){const y=e.findIndex(S=>S.name===l||S.aliases?.some(N=>N===l));if(y===-1)continue;const b=e[y];if(b.step!==d.step||d.priority!==b.priority)throw new Error(`"${$(b.name,b.aliases)}" middleware with ${b.priority} priority in ${b.step} step cannot be overridden by "${$(h,E)}" middleware with ${d.priority} priority in ${d.step} step.`);e.splice(y,1)}}for(const l of m)n.add(l)}e.push(d)},addRelativeTo:(c,f)=>{const{name:h,override:w,aliases:E}=f,d={middleware:c,...f},m=I(h,E);if(m.length>0){if(m.some(l=>n.has(l))){if(!w)throw new Error(`Duplicate middleware name '${$(h,E)}'`);for(const l of m){const y=t.findIndex(S=>S.name===l||S.aliases?.some(N=>N===l));if(y===-1)continue;const b=t[y];if(b.toMiddleware!==d.toMiddleware||b.relation!==d.relation)throw new Error(`"${$(b.name,b.aliases)}" middleware ${b.relation} "${b.toMiddleware}" middleware cannot be overridden by "${$(h,E)}" middleware ${d.relation} "${d.toMiddleware}" middleware.`);t.splice(y,1)}}for(const l of m)n.add(l)}t.push(d)},clone:()=>a(de()),use:c=>{c.applyToStack(g)},remove:c=>typeof c=="string"?s(c):i(c),removeByTag:c=>{let f=!1;const h=w=>{const{tags:E,name:d,aliases:m}=w;if(E&&E.includes(c)){const l=I(d,m);for(const y of l)n.delete(y);return f=!0,!1}return!0};return e=e.filter(h),t=t.filter(h),f},concat:c=>{const f=a(de());return f.use(c),f.identifyOnResolve(r||f.identifyOnResolve()||(c.identifyOnResolve?.()??!1)),f},applyToStack:a,identify:()=>p(!0).map(c=>{const f=c.step??c.relation+" "+c.toMiddleware;return $(c.name,c.aliases)+" - "+f}),identifyOnResolve(c){return typeof c=="boolean"&&(r=c),r},resolve:(c,f)=>{for(const h of p().map(w=>w.middleware).reverse())c=h(c,f);return r&&console.log(g.identify()),c}};return g},le={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},he={high:3,normal:2,low:1};class sr{constructor(t){this.middlewareStack=constructStack(),this.config=t}send(t,r,n){const o=typeof r!="function"?r:void 0,s=typeof r=="function"?r:n,i=t.resolveMiddleware(this.middlewareStack,this.config,o);if(s)i(t).then(a=>s(null,a.output),a=>s(a)).catch(()=>{});else return i(t).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}const Ge=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var q=R(20181);const J=(e,t=0,r=e.byteLength-t)=>{if(!Ge(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return q.Buffer.from(e,t,r)},me=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?q.Buffer.from(e,t):q.Buffer.from(e)},Ze=/^[A-Za-z0-9+/]*={0,2}$/,Ve=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!Ze.exec(e))throw new TypeError("Invalid base64 string.");const t=me(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},Qe=e=>{const t=me(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},ir=e=>typeof e=="string"?fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),Xe=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return J(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},et=e=>{let t;if(typeof e=="string"?t=Qe(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return J(t.buffer,t.byteOffset,t.byteLength).toString("base64")};function ar(e,t="utf-8"){return t==="base64"?toBase64(e):toUtf8(e)}function cr(e,t){return t==="base64"?Uint8ArrayBlobAdapter.mutate(fromBase64(e)):Uint8ArrayBlobAdapter.mutate(fromUtf8(e))}class pe extends null{static fromString(t,r="utf-8"){switch(typeof t){case"string":return transformFromString(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,pe.prototype),t}transformToString(t="utf-8"){return transformToString(this,t)}}const fr=(e,t)=>{const{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:o,checksumLocationName:s,streamHasher:i}=t,a=r!==void 0&&o!==void 0&&s!==void 0&&i!==void 0,u=a?i(o,e):void 0,p=new Readable({read:()=>{}});return e.on("data",g=>{const c=n(g)||0;p.push(`${c.toString(16)}\r
`),p.push(g),p.push(`\r
`)}),e.on("end",async()=>{if(p.push(`0\r
`),a){const g=r(await u);p.push(`${s}:${g}\r
`),p.push(`\r
`)}p.push(null)}),p};var tt=R(39023);const Y={supported:void 0};class ge{static create(t){return typeof t?.handle=="function"?t:new ge(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),Y.supported===void 0&&(Y.supported=Boolean(typeof Request<"u"&&"keepalive"in new Request("https://[::1]")))}destroy(){}async handle(t,{abortSignal:r}={}){this.config||(this.config=await this.configProvider);const n=this.config.requestTimeout,o=this.config.keepAlive===!0,s=this.config.credentials;if(r?.aborted){const m=new Error("Request aborted");return m.name="AbortError",Promise.reject(m)}let i=t.path;const a=buildQueryString(t.query||{});a&&(i+=`?${a}`),t.fragment&&(i+=`#${t.fragment}`);let u="";if(t.username!=null||t.password!=null){const m=t.username??"",l=t.password??"";u=`${m}:${l}@`}const{port:p,method:g}=t,c=`${t.protocol}//${u}${t.hostname}${p?`:${p}`:""}${i}`,f=g==="GET"||g==="HEAD"?void 0:t.body,h={body:f,headers:new Headers(t.headers),method:g,credentials:s};f&&(h.duplex="half"),typeof AbortController<"u"&&(h.signal=r),Y.supported&&(h.keepalive=o);let w=()=>{};const E=new Request(c,h),d=[fetch(E).then(m=>{const l=m.headers,y={};for(const S of l.entries())y[S[0]]=S[1];return m.body!=null?{response:new HttpResponse({headers:y,reason:m.statusText,statusCode:m.status,body:m.body})}:m.blob().then(S=>({response:new HttpResponse({headers:y,reason:m.statusText,statusCode:m.status,body:S})}))}),requestTimeout(n)];return r&&d.push(new Promise((m,l)=>{const y=()=>{const b=new Error("Request aborted");b.name="AbortError",l(b)};if(typeof r.addEventListener=="function"){const b=r;b.addEventListener("abort",y,{once:!0}),w=()=>b.removeEventListener("abort",y)}else r.onabort=y})),Promise.race(d).finally(w)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}}const rt=e=>typeof Blob=="function"&&e instanceof Blob?nt(e):ot(e);async function nt(e){const t=await st(e),r=Ve(t);return new Uint8Array(r)}async function ot(e){const t=[],r=e.getReader();let n=!1,o=0;for(;!n;){const{done:a,value:u}=await r.read();u&&(t.push(u),o+=u.length),n=a}const s=new Uint8Array(o);let i=0;for(const a of t)s.set(a,i),i+=a.length;return s}function st(e){return new Promise((t,r)=>{const n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));const o=n.result??"",s=o.indexOf(","),i=s>-1?s+1:o.length;t(o.substring(i))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)})}const ye={},G={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),ye[e]=t,G[t]=e}function ur(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){const n=e.slice(r,r+2).toLowerCase();if(n in G)t[r/2]=G[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function it(e){let t="";for(let r=0;r<e.byteLength;r++)t+=ye[e[r]];return t}const we=e=>typeof ReadableStream=="function"&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream),be="The stream has already been transformed.",at=e=>{if(!Ee(e)&&!we(e)){const o=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let t=!1;const r=async()=>{if(t)throw new Error(be);return t=!0,await rt(e)},n=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async o=>{const s=await r();if(o==="base64")return et(s);if(o==="hex")return it(s);if(o===void 0||o==="utf8"||o==="utf-8")return Xe(s);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(s);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(be);if(t=!0,Ee(e))return n(e);if(we(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},Ee=e=>typeof Blob=="function"&&e instanceof Blob,Te="The stream has already been transformed.",ct=e=>{if(!(e instanceof O.Readable))try{return at(e)}catch{const o=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${o}`)}let t=!1;const r=async()=>{if(t)throw new Error(Te);return t=!0,await Fe(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async n=>{const o=await r();return n===void 0||Buffer.isEncoding(n)?J(o.buffer,o.byteOffset,o.byteLength).toString(n):new tt.TextDecoder(n).decode(o)},transformToWebStream:()=>{if(t)throw new Error(Te);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof O.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please make sure you are using Node.js >= 17.0.0, or polyfill is available.");return t=!0,O.Readable.toWeb(e)}})};async function dr(e){if(isReadableStream(e))return splitWebStream(e);const t=new PassThrough,r=new PassThrough;return e.pipe(t),e.pipe(r),[t,r]}const lr=(e,t)=>isReadableStream(e)?headWebStream(e,t):new Promise((r,n)=>{const o=new ft;o.limit=t,e.pipe(o),e.on("error",s=>{o.end(),n(s)}),o.on("error",n),o.on("finish",function(){const s=new Uint8Array(Buffer.concat(this.buffers));r(s)})});class ft extends O.Writable{constructor(){super(...arguments),this.buffers=[],this.limit=1/0,this.bytesBuffered=0}_write(t,r,n){if(this.buffers.push(t),this.bytesBuffered+=t.byteLength??0,this.bytesBuffered>=this.limit){const o=this.bytesBuffered-this.limit,s=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=s.subarray(0,s.byteLength-o),this.emit("finish")}n()}}const hr=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return Uint8ArrayBlobAdapter.mutate(e);if(!e)return Uint8ArrayBlobAdapter.mutate(new Uint8Array);const r=t.streamCollector(e);return Uint8ArrayBlobAdapter.mutate(await r)};class ut{constructor(){this.middlewareStack=constructStack()}static classBuilder(){return new dt}resolveMiddlewareWithContext(t,r,n,{middlewareFn:o,clientName:s,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:u,smithyContext:p,additionalContext:g,CommandCtor:c}){for(const d of o.bind(this)(c,t,r,n))this.middlewareStack.use(d);const f=t.concat(this.middlewareStack),{logger:h}=r,w={logger:h,clientName:s,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:u,[SMITHY_CONTEXT_KEY]:{commandInstance:this,...p},...g},{requestHandler:E}=r;return f.resolve(d=>E.handle(d.request,n||{}),w)}}class dt{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=t=>t,this._outputFilterSensitiveLog=t=>t,this._serializer=null,this._deserializer=null}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,n={}){return this._smithyContext={service:t,operation:r,...n},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=n=>n,r=n=>n){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}build(){const t=this;let r;return r=class extends ut{static getEndpointParameterInstructions(){return t._ep}constructor(...[n]){super(),this.serialize=t._serializer,this.deserialize=t._deserializer,this.input=n??{},t._init(this)}resolveMiddleware(n,o,s){return this.resolveMiddlewareWithContext(n,o,s,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog,outputFilterSensitiveLog:t._outputFilterSensitiveLog,smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}}const mr=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},pr=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&H.warn(F(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){const t=e.toLowerCase();if((t==="false"||t==="true")&&H.warn(F(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},B=e=>{if(e!=null){if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&H.warn(F(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},lt=Math.ceil(2**127*(2-2**-23)),Z=e=>{const t=B(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>lt)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},V=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},gr=null,Se=e=>Q(e,32),Ce=e=>Q(e,16),Ae=e=>Q(e,8),Q=(e,t)=>{const r=V(e);if(r!==void 0&&ht(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},ht=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},yr=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},mt=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;const t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},wr=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return H.warn(F(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},br=e=>{if(e==null)return;const t=mt(e),r=Object.entries(t).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return t},Er=e=>B(typeof e=="string"?k(e):e),Tr=null,pt=e=>Z(typeof e=="string"?k(e):e),gt=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,k=e=>{const t=e.match(gt);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},Sr=e=>typeof e=="string"?_e(e):B(e),Cr=null,Ar=null,_r=e=>typeof e=="string"?_e(e):Z(e),_e=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},Rr=e=>V(typeof e=="string"?k(e):e),xr=null,$r=e=>Se(typeof e=="string"?k(e):e),yt=e=>Ce(typeof e=="string"?k(e):e),wt=e=>Ae(typeof e=="string"?k(e):e),F=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),H={warn:console.warn},bt=null,X=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ir(e){const t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),o=e.getUTCDate(),s=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),u=o<10?`0${o}`:`${o}`,p=s<10?`0${s}`:`${s}`,g=i<10?`0${i}`:`${i}`,c=a<10?`0${a}`:`${a}`;return`${bt[n]}, ${u} ${X[r]} ${t} ${p}:${g}:${c} GMT`}const Et=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),Tt=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=Et.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[r,n,o,s,i,a,u,p]=t,g=yt(U(n)),c=_(o,"month",1,12),f=_(s,"day",1,31);return M(g,c,f,{hours:i,minutes:a,seconds:u,fractionalMilliseconds:p})},St=null,Nr=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=St.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[r,n,o,s,i,a,u,p,g]=t,c=strictParseShort(U(n)),f=_(o,"month",1,12),h=_(s,"day",1,31),w=M(c,f,h,{hours:i,minutes:a,seconds:u,fractionalMilliseconds:p});return g.toUpperCase()!="Z"&&w.setTime(w.getTime()-Ut(g)),w},Ct=null,At=null,_t=null,Or=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=Ct.exec(e);if(t){const[r,n,o,s,i,a,u,p]=t;return M(strictParseShort(U(s)),ee(o),_(n,"day",1,31),{hours:i,minutes:a,seconds:u,fractionalMilliseconds:p})}if(t=At.exec(e),t){const[r,n,o,s,i,a,u,p]=t;return $t(M(Rt(s),ee(o),_(n,"day",1,31),{hours:i,minutes:a,seconds:u,fractionalMilliseconds:p}))}if(t=_t.exec(e),t){const[r,n,o,s,i,a,u,p]=t;return M(strictParseShort(U(p)),ee(n),_(o.trimLeft(),"day",1,31),{hours:s,minutes:i,seconds:a,fractionalMilliseconds:u})}throw new TypeError("Invalid RFC-7231 date-time value")},kr=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=strictParseDouble(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},M=(e,t,r,n)=>{const o=t-1;return Nt(e,o,r),new Date(Date.UTC(e,o,r,_(n.hours,"hour",0,23),_(n.minutes,"minute",0,59),_(n.seconds,"seconds",0,60),kt(n.fractionalMilliseconds)))},Rt=e=>{const t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+strictParseShort(U(e));return r<t?r+100:r},xt=null,$t=e=>e.getTime()-new Date().getTime()>xt?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,ee=e=>{const t=X.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},It=[31,28,31,30,31,30,31,31,30,31,30,31],Nt=(e,t,r)=>{let n=It[t];if(t===1&&Ot(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${X[t]} in ${e}: ${r}`)},Ot=e=>e%4===0&&(e%100!==0||e%400===0),_=(e,t,r,n)=>{const o=wt(U(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},kt=e=>e==null?0:pt("0."+e)*1e3,Ut=e=>{const t=e[0];let r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);const n=Number(e.substring(1,3)),o=Number(e.substring(4,6));return r*(n*60+o)*60*1e3},U=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};class Re extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,Re.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}}const Ur=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});const r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},Mt=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{const o=Pt(e),s=o.httpStatusCode?o.httpStatusCode+"":void 0,i=new r({name:t?.code||t?.Code||n||s||"UnknownError",$fault:"client",$metadata:o});throw decorateServiceException(i,t)},Mr=e=>({output:t,parsedBody:r,errorCode:n})=>{Mt({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},Pt=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Pr=e=>{const t=[];for(const r in AlgorithmId){const n=AlgorithmId[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},vr=e=>{const t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},Lr=e=>({...getChecksumConfiguration(e),...getRetryConfiguration(e)}),Dr=null,Br=e=>({...resolveChecksumRuntimeConfig(e),...resolveRetryRuntimeConfig(e)}),te=function(){const e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};te.prototype=Object.create(String.prototype,{constructor:{value:te,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(te,String);class W extends null{deserializeJSON(){return JSON.parse(super.toString())}toJSON(){return super.toString()}static fromObject(t){return t instanceof W?t:t instanceof String||typeof t=="string"?new W(t):new W(JSON.stringify(t))}}function vt(e){return new v({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,n])=>(t[r]=n,t),{}),fragment:e.hash})}async function Lt(e,t){const n=await ct(e.body).transformToString();if(e.statusCode===200){const o=JSON.parse(n);if(typeof o.AccessKeyId!="string"||typeof o.SecretAccessKey!="string"||typeof o.Token!="string"||typeof o.Expiration!="string")throw new x("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.Token,expiration:Tt(o.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let o={};try{o=JSON.parse(n)}catch{}throw Object.assign(new x(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:o.Code,Message:o.Message})}throw new x(`Server responded with status: ${e.statusCode}`,{logger:t})}const Dt=(e,t,r)=>async()=>{for(let n=0;n<t;++n)try{return await e()}catch{await new Promise(s=>setTimeout(s,r))}return await e()},Bt="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",Ft="http://169.254.170.2",Ht="AWS_CONTAINER_CREDENTIALS_FULL_URI",Wt="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",jt="AWS_CONTAINER_AUTHORIZATION_TOKEN",zt=(e={})=>{e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let t;const r=e.awsContainerCredentialsRelativeUri??process.env[Bt],n=e.awsContainerCredentialsFullUri??process.env[Ht],o=e.awsContainerAuthorizationToken??process.env[jt],s=e.awsContainerAuthorizationTokenFile??process.env[Wt],i=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console.warn:e.logger.warn;if(r&&n&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),o&&s&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),n)t=n;else if(r)t=`${Ft}${r}`;else throw new x(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});const a=new URL(t);Ye(a,e.logger);const u=new L({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return Dt(async()=>{const p=vt(a);o?p.headers.Authorization=o:s&&(p.headers.Authorization=(await ze().readFile(s)).toString());try{const g=await u.handle(p);return Lt(g.response)}catch(g){throw new x(String(g),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)}}};
